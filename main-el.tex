\documentclass[a4paper,nobib]{tufte-book}

\input{preamble.tex}

% Greek
\usepackage[utf8]{inputenc}
\usepackage[greek,english]{babel}
\usepackage{alphabeta}
\let\textlozenge\undefined
\usepackage{gfsartemisia-euler}
\NewDocumentCommand{\g}{m}{\foreignlanguage{greek}{#1}}
%\usepackage{hyphenation-greek}
%\input{hyphenation-el.tex}

%%
% Book metadata
\title{Design of Fault Detection, Isolation and Recovery in the AcubeSAT nanosatellite\thanks{AcubeSAT}}
\author[Konstantinos Kanavouras]{Konstantinos Kanavouras}
\publisher{\ensuregreek{Αριστοτέλειο Πανεπιστήμιο Θεσσαλονίκης}}

\begin{document}

% Front matter
%\frontmatter

% r.1 blank page
%\blankpage

% r.3 full title page
\makeatletter
\renewcommand{\maketitle}{%
	\newpage
	\global\@topnum\z@% prevent floats from being placed at the top of the page
	\begingroup
	\setlength{\parindent}{0pt}%
	\setlength{\parskip}{4pt}%
	\let\@@title\@empty
	\let\@@author\@empty
	\let\@@date\@empty
	\thispagestyle{empty}
	\begin{fullwidth}
		\vfill
		\begin{center}
			\href{https://www.auth.gr/}{\includegraphics[width=.8\textwidth]{auth_logo_text}}\par
			\vspace{1cm}
			\LARGE\textsc{Διπλωματικη Εργασια}\par
			\vspace{6ex}
			\hrule
			\vspace{4ex}
			\Huge\textbf{Σχεδιασμός μηχανισμού Ανίχνευσης, Απομόνωσης και Αντιμετώπισης Βλαβών}\\[1ex]
			\LARGE\textbf{στον}\\
			\Huge\textbf{Νανοδορυφόρο AcubeSAT}\par
			\vspace{2.7ex}
			\hrule

			\vspace{4ex}

			\Large
			\begin{tabular}{ll}
				\emph{Συγγραφέας:} & \href{https://github.com/kongr45gpen}{Κωνσταντίνος \textsc{Καναβουρας} \normalsize (\fontfamily{pplx}\selectfont 8824)}
				\\[1.5ex]
				\emph{Επιβλέπων:} & \href{http://ee.auth.gr/en/school/faculty-staff/electronics-computers-department/hatzopoulos-alkiviadis/}{Καθ. Αλκιβιάδης \textsc{Χατζοπουλος}}
			\end{tabular}

			\vspace{6ex}

			\large \textit{Η διπλωματική εργασία κατατίθεται για την \\ εκπλήρωση των υποχρεώσεων για λήψη διπλώματος}\\[0.3cm] % University requirement text
			\textit{στην}\\[0.4cm]
			\href{https://www.eng.auth.gr/en/home.html}{Πολυτεχνική Σχολή}
			\\
			\href{https://ee.auth.gr/en/}{Τμήμα Ηλεκτρολόγων Μηχανικών \& Μηχανικών Υπολογιστών}
			\\[1cm] % Research group name and department name

			\vspace{6ex}

			{\large \today}\\[4cm] % Date

		\end{center}
		\vfill
	\end{fullwidth}
	\endgroup
	\thispagestyle{plain}% suppress the running head
	\tuftebreak% add some space before the text begins
	\@afterindentfalse\@afterheading% suppress indentation of the next paragraph
}
\makeatother
\maketitle

% v.4 copyright page
\newpage
\begin{fullwidth}
~\vfill
\thispagestyle{empty}
\setlength{\parindent}{0pt}
\setlength{\parskip}{\baselineskip}
Copyright \copyright\ \the\year\ \thanklessauthor

\par\smallcaps{Δημοσιευτηκε απο το \thanklesspublisher}

\par\smallcaps{\href{https://github.com/kongr45gpen/thesis-latex}{Https://GitHub.com/Kongr45gpen/Thesis-Latex}}

\justify

\par Αυτή η εργασία χορηγείται με άδεια Creative Commons Αναφορά Δημιουργού 4.0 Διεθνές (CC BY 4.0) (η ``Άδεια'')· το κείμενο του παρόντος δεν επιτρέπεται να χρησιμοποιηθεί παρά μόνο με βάση την Άδεια. Για να δείτε ένα αντίγραφο αυτής της άδειας, επισκεφτείτε το
\url{https://creativecommons.org/licenses/by/4.0/legalcode.el}, ή δείτε μια "αναγνώσιμη από άνθρωπο" σύνοψη στο \url{https://creativecommons.org/licenses/by/4.0/deed.el}.\index{license}

\par Το AcubeSAT project εκτελείται με την υποστήριξη του Education Office του \href{https://www.esa.int/}{Ευρωπαϊκού Οργανισμού Διαστήματος}, στα πλαίσια του \href{https://www.esa.int/Education/CubeSats_-_Fly_Your_Satellite/}{προγράμματος Fly Your Satellite!}.

\par Οι απόψεις που εκφράζονται στο παρόν από τους συγγραφείς δεν μπορούν \smallcaps{σε καμια περιπτωση να θεωρηθει πως εκφραζουν} την επίσημη άποψη, ή υποστήριξη, του Ευρωπαϊκού Οργανισμού Διαστήματος.

\par\textit{Rendered on \today{} (\texttt{\gitcommit}: \gitcommitmessage)}
\end{fullwidth}

% r.5 contents
\tableofcontents

\begin{fullwidth}
\listoffigures

\listoftables

%\chapter*{List of Acronyms}
%\acuseall%
\bgroup
\setlength\parskip{1ex}
\printacronyms[pages={display=all,seq/use=false},]
\egroup

\end{fullwidth}

% r.9 introduction
\cleardoublepage

\chapter*{Περίληψη}

%This sample book discusses the design of Edward Tufte's

\justify
Το διάστημα δεν είναι ένα φιλόξενο περιβάλλον: αν και η σημερινή τεχνολογία έχει επιτρέψει τη λειτουργία χιλιάδων τεχνητών δο\-ρυ\-φό\-ρων σε τροχιά γύρω από τη γη, οι νανοδορυφόροι που χαρακτηρίζονται ως “CubeSats” έχουν ένα ποσοστό αποτυχίας κοντά στο 50\%. Τα χαμηλά κόστη, η έλλειψη αυστηρών τεχνικών προδιαγραφών και η έλλειψη ανοιχτής τεχνικής βιβλιογραφίας συχνά αυξάνει τα ρίσκα για τα εκπαιδευτικά, επιστημονικά και εμπορικά CubeSat. Αυτή η εργασία ερευνά μία απλή παραμετροποιήσιμη αρχιτεκτονική Ανίχνευσης, Απομόνωσης και Αντιμετώπισης Βλαβών (“FDIR”) που βασίζεται σε Ευρωπαϊκά πρότυπα και πρωτόκολλα, ευρέως χρησιμοποιούμενα στον τομέα της αεροδιαστημικής. Αυτή η δομή διόρθωσης σφαλμάτων, μαζί με τη συνοδευόμενη υλοποίηση σε κώδικα, μπορεί να χρησιμοποιηθεί από οποιαδήποτε αποστολή CubeSat για να αυξηθεί η αξιοπιστία του σχεδιασμού και να μειωθεί η πιθανότητα αποτυχίας, μέσω της αυτόνομης αντιμετώπισης βλαβών κατά την πτήση. Η εργασία επίσης περιλαμβάνει γενικές πληροφορίες σχετικά με την αξιοπιστία των CubeSat, και εξερευνά το λογισμικό και υλικό που χρησιμοποιείται για να υλοποιηθεί το προτεινόμενο FDIR στην αποστολή AcubeSAT, η οποία βρίσκεται υπό σχεδιασμό από φοιτητές του Αριστοτελείου Πανεπιστημίου Θεσσαλονίκης.

\chapter*{Abstract}

%\begin{fullwidth}
\begin{center}
	\large Konstantinos Kanavouras
	\par
	\vspace{2ex}
	\Large\textbf{Design of Fault Detection, Isolation and Recovery}\\
	\large\textbf{in the}\\
	\Large\textbf{AcubeSAT NanoSatellite}\par
	\draft{university, supervisor etc.}
\end{center}
%\end{fullwidth}

%This sample book discusses the design of Edward Tufte's
%books\parencite{Tufte2001,Tufte1990,Tufte1997,Tufte2006}.
\justify
Space is not a welcoming environment; while the aerospace engineering community has managed to reliably operate thousands of satellites in orbit, CubeSats, the most popular class of nanosatellite, only have a 50\% success rate. Low costs, lack of strict technical requirements and scarcity of publicly available documentation often drives up the risks for educational, scientific and commercial CubeSats. This thesis investigates a configurable and modular Fault Detection, Isolation and Recovery (FDIR) architecture that uses the ECSS Packet Utilisation Standard. This FDIR concept, along with the provided open-source software implementation, can be used by CubeSat missions to increase the reliability of their design and chances of mission success, by autonomously responding to on-board errors. The thesis also includes background information regarding CubeSat reliability, and explores the software and hardware used to implement the proposed FDIR design on the AcubeSAT mission, currently under design by students of the Aristotle University of Thessaloniki.


%%
% Start the main matter (normal chapters)
\mainmatter


\chapter{Εισαγωγή}



%\newthought{The pages} of a book are usually divided into three major
%sections: the front matter (also called preliminary matter or prelim), the
%main matter (the core text of the book), and the back matter (or end
%matter).

%\newthought{The front matter} of a book refers to all of the material that
%comes before the main text.  The following table from shows a list of
%material that appears in the front matter of
%along with its page number.  Page numbers that appear in parentheses refer
%to folios that do not have a printed page number (but they are still
%counted in the page number sequence).

\section{Επιστημονική Περιοχή}

Η παρούσα εργασία ασχολείται με την Αεροδιαστημική Μηχανική, και πιο συγκεκριμένα την τεχνολογία κατασκευής και χειρισμού δορυφόρων. Ο πρώτος τεχνητός δορυφόρος "Sputnik 1" εκτοξεύτηκε το έτος 1957, και μέχρι το 2021 έχουν εκτοξευτεί περίπου \SI{8900}{} δορυφόροι, από τους οποίους περίπου \SI{4000}{} είναι λειτουργικοί και σε τροχιά. \autocite{unionofconcernedscientists_satellite_database_2021,kelso_norad_twoline,wood_visualizing_all_2020}

\begin{marginfigure}
	\centering
	\begin{tikzpicture}[every node/.style={scale=.8}]
	\pie[
	sum=auto,after number=,radius={1.8},text=pin
	]{1440/Εμπορικοί,
		436/Κυβερνητικοί,
		339/Στρατιωτικοί,
		133/Πολιτικοί,
		318/Συνδυασμός
	}
	
	\end{tikzpicture}
	\caption{Είδη δορυφόρων σε λειτουργία το 2018 \parencite{wood_visualizing_all_2020}}
	\label{fig:satellite_types}
\end{marginfigure}

\begin{figure}[h]
	\includegraphics{satellites}
	\caption[Ενεργοί δορυφόροι σε τροχιά γύρω από τη γη το 2021][4cm]{Ενεργοί τεχνητοί δορυφόροι σε τροχιά γύρω από τη γη το 2021. Κοντά στον πλανήτη βρίσκονται οι δορυφόροι Χαμηλής Γήινης Τροχιάς. Σε σταθερό υψόμετρο \SI{35786}{\kilo\meter} βρίσκονται οι δορυφόροι Γεωστατικής τροχιάς, και ανάμεσά τους κινούνται οι δορυφόροι Μέσης Γήινης Τροχιάς. \parencite{agi:analyticalgraphics_satellite_viewer}}
	\label{fig:all_satellites}
\end{figure}

Οι εκτοξευμένοι δορυφόροι επιτελούν ένα σύνολο από διαφορετικές λειτουργίες, που μπορεί να περιλαμβάνουν τηλεπικοινωνίες, παρατήρηση γης, σήματα πλοήγησης (\acs{GNSS}), επιστημονική έρευνα, ανάπτυξη τεχνολογίας ή άλλους σκοπούς, χωρίς να συμπεριλαμβάνονται σε αυτό το κομμάτι επανδρωμένες αποστολές, αποστολές εκτός της τροχιάς της γης, ή διαστημικοί σταθμοί. Τα δεδομένα που παράγει η διαστημική τεχνολογία, με επιδράσεις στις μεταφορές, στην πρόγνωση καιρού και στην τεχνολογία, έχουν εδώ και καιρό γίνει αναπόσπαστο κομμάτι του σύγχρονου πολιτισμού.

Μετά την εκτόξευσή τους, οι δορυφόροι τυπικά παραμένουν στο διάστημα μέχρι την ολοκλήρωση της αποστολής τους μετά από κάποια χρόνια, οπότε και μπορούν να επιστρέψουν στη γη και να καούν στην ατμόσφαιρα, είτε να παραμείνουν στο διάστημα ως διαστημικά σκουπίδια.

\begin{marginfigure}
	\includegraphics{cool_satellite}
	\caption[Γραφική αναπαράσταση του δορυφόρου Jason-3]{Γραφική αναπαράσταση του δορυφόρου \href{https://www.flickr.com/photos/noaasatellites/16979948568}{Jason-3}. Στην εικόνα διακρίνονται τα ηλιακά πάνελς, οι δύο κατευθυντικές κεραίες και η θερμική μόνωση του δορυφόρου.}
\end{marginfigure}

Η ανάπτυξη διαστημικής τεχνολογίας παρουσιάζει έναν σημαντικό βαθμό δυσκολίας, ο οποίος προέρχεται από τις ιδιαίτερα αυξημένες απαιτήσεις αξιοπιστίας στις δυσμενείς συνθήκες του διαστήματος. Πιο συγκεκριμένα, η μεγάλη απόσταση, οι ακραίες θερμοκρασίες, τα μηχανικά φορτία της εκτόξευσης, οι ακτινοβολίες υψηλών ενεργειών, το κενό αέρα,  και η αδυναμία αποκατάστασης βλαβών, έχουν εγείρει ένα ευρεί φάσμα προκλήσεων μπροστά στην εξερεύνηση του διαστήματος. Έτσι, πέρα από την τυπική ανάπτυξη τεχνολογίας, τα πρότζεκτ αεροδιαστημικής συνδέονται αναπόσπαστα με ένα σύνολο κλάδων της μηχανικής, όπως το systems engineering (μηχανική συστημάτων), product assurance (διασφάλιση ποιότητας), reliability engineering (αξιοπιστία συστημάτων) και ζητήματα assembly, integration \& verification (κατασκευής, συναρμολόγησης και επαλήθευσης). \autocite{smad} 

Παρά τα παραπάνω προβλήματα, η επιστήμη έχει προχωρήσει αρκετά ώστε το διάστημα να αποτελεί έναν εμπορικό στόχο. Στα πλαίσια της φιλοσοφίας "NewSpace", όλο και περισσότεροι κερδοσκοπικοί ή μη φορείς εκμεταλλεύονται τις δυνατότητες που προσφέρονται έξω από τη γη. \autocite{denis_new_space_2020} Start-ups, αστερισμοί δορυφόρων, εκπαιδευτικές αποστολές και εμπορικές υπηρεσίες είναι έννοιες που ήδη έγιναν συνηθισμένες τη δεκαετία του 2010, με περισσότερες χώρες ανά τον κόσμο να αρχίζουν όχι μόνον να έχουν πρόσβαση στο διάστημα, αλλά και να αποκτούν δυνατότητα εκτόξευσης.

Στα πλαίσια του παραπάνω μελετάται η τεχνολογία των όλο και πιο δημοφιλών \textbf{νανοδορυφόρων}. \autocite{sweeting_modern_small_2018a} Τα \textbf{CubeSats}, η πιο δημοφιλής κατηγορία νανοδορυφόρου που είναι και το αντικείμενο αυτής της εργασίας, δημιουργήθηκαν σαν ιδέα το 1999. Το χαμηλό τους κόστος και μέγεθος, καθώς και η μικρή σχετικά πολυπλοκότητα, έχουν επιτρέψει πανεπιστήμια και οργανισμούς παγκοσμίως να εκτοξεύσουν πάνω από \SI{1530}{} CubeSats \autocite{cubesat_database}.

\begin{marginfigure}
	\includegraphics{f1_cubesat_fm}
	\caption{Το "F-1" CubeSat του FPT Πανεπιστημίου στο Βιετνάμ, μεγέθους 1U}
\end{marginfigure}

Τα CubeSats κατασκευάζονται από δομικές μονάδες διαστάσεων \SI[product-units = single]{10 x 10 x 10}{\centi\metre} που ονομάζονται \textbf{Units}. Τυπικά μεγέθη δορυφόρων προκύπτουν "στοιβάζοντας" αυτά τα units, με αποτέλεσμα δορυφόρους 1U, 1.5U, 2U, 3U, 6U και 12U. Το κάθε Unit να μπορεί να ζυγίσει μέρχι \SI{2}{\kilogram}. Εσωτερικά, τα CubeSat αποτελούνται από εμπορικά ηλεκτρονικά εξαρτήματα χαμηλού κόστους, τα λεγόμενα \acf{COTS}. Τα CubeSats εκτοξεύονται συνήθως σε Χαμηλή Γήινη Τροχιά (\acs{LEO}) \parencite{anthopoulos_orbital_analysis_2020}, τοποθετούμενα ως δευτερεύοντα φορτία σε εκτοξεύσεις μεγαλύτερων δορυφόρων ("piggyback launch"), και παραμένουν ενεργά για χρονικά διαστήματα περίπου 1 ως 3 χρόνια.

\section{Σκοπός και Συνεισφορά της Εργασίας}

\begin{marginfigure}
	\centering
	\begin{tikzpicture}[every node/.style={scale=0.8}]
	\pie[
	sum=auto,after number=,radius={1},text=pin,rotate=0,scale font,color={MaterialGreen400, MaterialBlue, MaterialAmber, MaterialRed, MaterialYellow, MaterialGrey}
	]{131/Πλήρης επιτυχία,
		144/Σε εξέλιξη,
		61/Πρώιμη αποτυχία,
		120/Μη λειτουργία,
		37/{Απώλεια εκτόξευσης},
		204/Άγνωστο
	}
	
	\end{tikzpicture}
	\caption{Κατάσταση αποστολών CubeSat από το 2000 \parencite{swartwout_cubesat_mission_2019}}
	\label{fig:cubesat_status}
\end{marginfigure}

\begin{marginfigure}
	\centering
	\begin{tikzpicture}[every node/.style={scale=0.8}]
	\pie[
	sum=auto,after number=,radius={1},text=pin,rotate=0,scale font,color={MaterialGreen400, MaterialBlue, MaterialAmber, MaterialRed, MaterialYellow, MaterialGrey}
	]{38/Πλήρης επιτυχία,
		54/Σε εξέλιξη,
		34/Πρώιμη αποτυχία,
		88/Μη λειτουργία,
		17/{Απώλεια εκτόξευσης},
		58/Άγνωστο
	}
	
	\end{tikzpicture}
	\caption[Κατάσταση αποστολών CubeSat από ανεξάρτητους κατασκευαστές]{Κατάσταση αποστολών CubeSat από ανεξάρτητους κατασκευαστές ("hobbyists": πανεπιστήμια και άλλα ερευνητικά/εκπαιδευτικά πρότζεκτ) \parencite{cubesat_database}}
	\label{fig:cubesat_status_hobbyist}
\end{marginfigure}

Η παρούσα εργασία αφορά τη βελτίωση της \textbf{αξιοπιστίας} των νανοδορυφόρων και συστημάτων CubeSat. Αν και η πλειοψηφία των κλασικών δορυφόρων που έχουν εκτοξευτεί είχαν, έστω μερικώς, επιτυχημένες αποστολές \parencite{kattakuri_failures_spacecraft_2019,jacklin_smallsatellite_mission_2019}, το 39.6\% των εκτοξευμένων CubeSats έχουν αποτύχει να ολοκληρώσουν την αποστολή τους, ή δεν έχουν λειτουργήσει σε τροχιά. Το ποσοστό αποτυχίας αυξάνεται στο 57.0\% αν εστιάσουμε σε φορείς (όπως Πανεπιστήμια) που εκτοξεύουν τα πρώτα τους CubeSat, και δεν διαθέτουν το διαστημικό υπόβαθρο των μεγάλων κατασκευαστών και των εμπορικών δορυφόρων.

Οι λόγοι της υψηλής αποτυχίας των CubeSat σχετίζονται κυρίως με το συμπιεσμένο πρόγραμμα κατασκευής, το οποίο οδηγεί σε σφάλματα και προβλήματα που δεν εντοπίζονται κατά τη διάρκεια του σχεδιασμού. Πηγές βλαβών όπως περιβαλλοντική φθορά (θερμικοί κύκλοι, ακτινοβολία), έλλειψη περιθωρίων ασφαλείας στην ισχύ και τις τηλεπικοινωνίες, και προβλήματα λογισμικού, συνδυάζονται με τη γενικότερη έλλειψη εμπειρίας και αυστηρών διαδικασιών των νέων κατασκευαστών, για να μειώσουν το βαθμό αξιοπιστίας των νανοδορυφόρων. \parencite{swartwout_cubesat_mission_2019,langer_reliability_estimation_2017}

\begin{figure}
\centering
\begin{tikzpicture}
\begin{axis}  
[  
ybar,  
enlargelimits=0.15,  
ylabel={Αποτυχημένοι δορυφόροι}, % the ylabel must precede a # symbol.  
xlabel={Υποσύστημα Αποτυχίας},  
symbolic x coords={ADCS, COMMS, Deployment, EPS, Payload, Thermal, OBDH, Launch, Unknown}, % these are the specification of coordinates on the x-axis.  
xticklabels={ADCS, COMMS, Deployment, EPS, Payload, Thermal, OBDH, Εκτόξευση, Άγνωστο},
xtick=data,  
nodes near coords, % this command is used to mention the y-axis points on the top of the particular bar.  
nodes near coords align={vertical},  
ymajorgrids={true},
width=11cm,
height=6cm,
x tick label style={rotate=45,anchor=east},
nodes near coords={\pgfmathprintnumber\pgfplotspointmeta\%} 
]  
\addplot coordinates {(ADCS, 16) (COMMS, 13) (Deployment, 10) (EPS, 9) (Payload, 8) (Thermal, 6) (OBDH, 2) (Launch, 2) (Unknown, 34) };  

\end{axis}  
\end{tikzpicture}  
\caption[Κύριοι λόγοι αποτυχίας αποστολών CubeSat]{Κύριοι λόγοι αποτυχίας αποστολών CubeSat (\(n=50\)) \parencite{bouwmeester_survey_implementation_2017}}
\label{fig:whyfail}
\end{figure}

Η προσέγγιση που ακολουθείται για την αύξηση της αξιοπιστίας των CubeSat περιλαμβάνει:
\begin{compactitem}
	\item Μείωση του αριθμού πιθανών βλαβών από την φάση του σχεδιασμού, με συμπερίληψη ζητημάτων αξιοπιστίας στις πρώιμες φάσεις του πρότζεκτ
	\item Δομημένα εργαλεία εκτίμησης και βελτίωσης της αξιοπιστίας, όπως \textbf{\acf{FMEA}} και \textbf{\acf{FDIR}} \autocite{faure_lean_satellites_2017,menchinelli_reliability_engineering_2018}
	\item Προσαρμογή και υιοθέτηση ανοιχτών προτύπων διαστημικής τεχνολογίας για το σχεδιασμό, την κατασκευή και την επαλήθευση \autocite{scholz_handbook_free_2021}
\end{compactitem}

Η παρούσα εργασία σκοπεύει να εμπλουτίσει την εργαλειοθήκη των κατασκευαστών CubeSat αναλύοντας μία δομημένη προσέγγιση \ac{FDIR} που βασίζεται στα \textbf{ευρωπαϊκά πρότυπα \acs{ECSS}}, και στην εργασία της πρωτοβουλίας \textbf{\acs{SAVOIR}}\footurl{https://savoir.estec.esa.int/} της ευρωπαϊκής διαστημικής βιομηχανίας. Στις επόμενες σελίδες, θα αναλυθεί πως οι ιδέες αυτές μπορούν να προσαρμοστούν σε μία αποστολή CubeSat μικρού βεληνεκούς ώστε:
\begin{itemize}
	\item Να χρησιμοποιηθεί ένας δομημένος τρόπος για να ερευνηθούν οι πιθανές αποτυχίες ενός δορυφόρου, και τρόποι αντιμετώπισής τους
	\item Να προετοιμαστεί λογισμικό που θα μπορεί να ανταποκριθεί και να διαχειριστεί με ασφάλεια το σύνολο των κρίσιμων αποτυχιών σε τροχιά
	\item Να αναπτυχθεί μία \textbf{παραμετροποιήσιμη} αρχιτεκτονική, που θα επιτρέπει τους χειριστές να μεταβάλλουν εύκολα τη συμπεριφορά του συστήματος \acs{FDIR} και να το προσαρμόσουν σε διαφορετικά δεδομένα
\end{itemize}

Το προτεινόμενο σύστημα \acs{FDIR} στοχεύει στην αύξηση της σιγουριάς κατά την κατασκευή, αλλά και στη γρήγορη ενσωμάτωση νέων δεδομένων που προκύπτουν κατά τις δοκιμές και την εκτόξευση.

Πέρα από τη θεωρητική ανάλυση, περίληψη και σχολιασμό των προτύπων, η εργασία εστιάζει στην εφαρμογή της προαναφερθείσας δομής \acs{FDIR} στο νανοδορυφόρο \emph{AcubeSAT}, και περιλαμβάνει μία πειραματική υλοποίηση της σουίτας \acs{FDIR} σε υλικό \& λογισμικό.

% maybe some other inspiring stuff here? idk

\section{Διάρθωση και Δομή}

Η εργασία ξεκινάει με την περίληψη της αποστολής AcubeSAT, που αποτελεί την κύρια αφορμή και πλαίσιο συγγραφής της (\Cref{cap:acubesat}). Συνεχίζει με μία ανάλυση των κύριων προτύπων και της φιλοσοφίας \acs{FDIR}, με εστίαση στα κομμάτια που αφορούν τους κατασκευαστές CubeSat και τις ερευνητικές ή εκπαιδευτικές αποστολές (\Cref{cap:savoir}). Το επόμενο κομμάτι εξετάζει την εφαρμογή των προηγούμενων προτύπων στο σχεδιασμό του AcubeSAT, και σε μερικές σχεδιαστικές αποφάσεις και λεπτομέρειες υλοποίησης του \acs{FDIR} στο νανοδορυφόρο (\Cref{cap:acufdir}).

Η τελευταία ενότητα περιλαμβάνει την πρακτική επίδειξη του προτεινόμενου \acs{FDIR} σε ένα απλό δοκιμαστικό σύστημα δύο αισθητήρων (\Cref{cap:practical}). Το σύστημα αναπτύσσεται έτσι ώστε να μπορεί να εντοπίσει και να ανακάμψει από όλες τις προβλεπόμενες πιθανές αποτυχίες, χρησιμοποιώντας τις πλήρεις βιβλιοθήκες που καλύπτουν τα πρότυπα \acs{ECSS} και \acs{FDIR}. Μετά από την ανάπτυξη του συστήματος, γίνεται πλήρης δοκιμή της απόκρισής του στις αποτυχίες. Το σύστημα είναι διαμορφωμένο έτσι ώστε να εξομοιώσει το σύστημα του δορυφόρου, συμπεριλαμβανομένου του συστήματος μικροελεγκτή αλλά και του Σταθμού Βάσης.

\chapter{Η αποστολή AcubeSAT}
\label{cap:acubesat}

\begin{marginfigure}
	\includegraphics{acubesat_patch}
	\caption{Λογότυπο της αποστολής AcubeSAT}
\end{marginfigure}

\begin{marginfigure}
	\centering
	\includegraphics[width=.8\textwidth]{acubesat}
	\caption{Καλλιτεχνική προβολή του νανοδορυφόρου AcubeSAT}
\end{marginfigure}

Το πλαίσιο ανάπτυξης της παρούσας εργασίας είναι το πρότζεκτ του νανοδορυφόρου \textbf{"AcubeSAT"} που βρίσκεται υπό σχεδιασμό από φοιτητές του Αριστοτελείου Πανεπιστημίου Θεσσαλονίκης, και στοχεύει στην εκτέλεση ενός πειράματος βιολογικής φύσεως στο διάστημα.

Το πρότζεκτ ξεκίνησε σε ερευνητική μορφή το 2015, και το 2020 έγινε μέρος του προγράμματος \foothref{https://www.esa.int/Education/CubeSats_-_Fly_Your_Satellite}{Fly Your Satellite! 3} του Ευρωπαϊκού Οργανισμού Διαστήματος (European Space Agency), με ορίζοντα εκτόξευσης το 2023.

Το AcubeSAT έχει μέγεθος 3 κυβικών μονάδων (\textbf{3U}), διαστάσεις \SI[product-units = single]{10 x 10 x 34.05}{\centi\metre} και μάζα \SI{4.26}{\kilogram}, και περιλαμβάνει το \emph{ωφέλιμο φορτίο} του πειράματος, που καλύπτει 2U, και τα υπόλοιπα υποστηρικτικά υποσυστήματα (platform) στο υπόλοιπο 1U.

\begin{figure}
	\includegraphics[width=.7\textwidth]{cubesat_exploded}
	\caption{Προβολή του εσωτερικού του AcubeSAT, όπου φαίνονται τα διαφορετικά υποσυστήματα και η πειραματική διάταξη}
\end{figure}

\section{Η αποστολή}
\draft{Here we write the history of the project and a description of the mission and the satellite...}

\section{Υποσυστήματα}

Ο νανοδορυφόρος AcubeSAT είναι τεχνικά και οργανωτικά χωρισμένος σε 11 διαφορετικές υποομάδες ή \textbf{υποσυστήματα}, κάθε μία από τις οποίες είναι υπεύθυνη για ένα διαφορετικό τμήμα του δορυφόρου, και αποτελείται από \SIrange{2}{9}{} αφοσιωμένα μέλη.

Στις επόμενες ενότητες παρουσιάζεται μια σύντομη εισαγωγή στη λειτουργία και το σχεδιασμό κάθε υποσυστήματος. Καθώς η διαδικασία σχεδιασμού συστημάτων και \acl{PA} είναι %\ensuregreek{εγ\-γε\-νώς}
\g{εγγενώς}
συνδεδεμένη με τη λειτουργία όλων των υποσυστημάτων, \g{αναφέρονται} επίσης οι λεπτομέρειες που αφορούν το \acs{FDIR}. Για πιο λεπτομερείς πληροφορίες, ο αναγνώστης ενθαρρύνεται να ανατρέξει στην \foothref{https://acubesat.spacedot.gr/subsystems/}{ιστοσελίδα του AcubeSAT}, ή στα δημοσίως διαθέσιμα \foothref{https://gitlab.com/acubesat/documentation/cdr-public}{έγγραφα του \ac{CDR}}.

\subsection{\acf{ADCS}}
\label{sec:adcs}

Η υποομάδα του \ac{ADCS} είναι υπεύθυνη για τον έλεγχο του \textbf{προσανατολισμού} του δορυφόρου σε τροχιά. Αυτό επιτυγχάνεται με τη χρήση μιας σειράς ενεργοποιητών, που προέρχονται έτοιμοι από την αγορά (\ac{COTS}): μία πλακέτα 3 αξόνων και έναν τροχός αντίδρασης 1 άξονα, σε συνδυασμό με αισθητήρες για τον προσδιορισμό της περιστροφής του δορυφόρου (1 γυροσκόπιο και 2 μαγνητόμετρα) και αλγορίθμους φιλτραρίσματος \& ελέγχου. \autocite{DDJF_AOCS,velentzas_design_attitude_2021}

Το \ac{ADCS} μπορεί να λειτουργήσει με τα εξής διαφορετικά ``προφίλ στόχευσης'' (pointing profiles) για να καλύψει διαφορετικές λειτουργικές ανάγκες:
\begin{enumerate}
	\item \textbf{Λειτουργία Σταθεροποίησης} (Detumbling), όπου ο δορυφόρος προσπαθεί να φτάσει τη γωνιακή του ταχύτητα κοντά στο 0, για να εξασφαλίσει μια αξιόπιστη ραδιοζεύξη, να αποτρέψει την αποκόλληση εξαρτημάτων και να επιτρέψει αργότερα την ευκολότερη ανάκτηση του επιθυμητού προσανατολισμού.
	
	Η λειτουργία Σταθεροποίησης υλοποιείται με τον απλούστερο δυνατό τρόπο, χρησιμοποιώντας μόνο το ένα από τα 2 μαγνητόμετρα και έναν απλό αλγόριθμο ελέγχου. Ενεργοποιείται όταν δεν υπάρχει ανάγκη εφαρμογής κάποιου άλλου ή όταν η γωνιακή ταχύτητα του νανοδορυφόρου είναι επικίνδυνα υψηλή. Στο AcubeSAT, το προφίλ αυτό εφαρμόζεται στην \emph{Ασφαλή Λειτουργία}, στη \emph{Λειτουργία Εκκίνησης} και στη \emph{Λειτουργία Πειράματος}.
	
	\item \textbf{Στόχευση στο Ναδίρ} (Nadir Pointing), όπου ο δορυφόρος \g{στρέ\-φει} την πλευρά \(+X\) ώστε να κοιτάζει προς τη Γη. Αυτό το προφίλ χρησιμοποιείται κατά τη διάρκεια της \emph{Κανονικής Λειτουργίας} σε περάσματα πάνω από τον Σταθμό Βάσης, όπου η κατευθυντική κεραία χρειάζεται άμεση ορατότητα.
	
	\item \textbf{Στόχευση στον Ήλιο} (Sun Pointing), όπου ο δορυφόρος \g{στρέ\-φει} δύο πλευρές προς τον ήλιο με γωνία πρόσπτωσης \SI{45}{\degree}, προ\-κει\-μέ\-νου να μεγιστοποιηθεί η είσοδος των ηλιακών πάνελ. Αυτό το προφίλ χρησιμοποιείται κατά τη διάρκεια της \emph{Κανονικής Λειτουργίας}, ανάμεσα στα περάσματα από το Σταθμό Βάσης, προκειμένου να εξασφαλιστεί θετικός προϋπολογισμός ισχύος.
\end{enumerate}

\begin{margintable}
	\centering
	\caption[Μέγιστες τιμές σφαλμάτων ADCS μετά τη σταθεροποίηση]{Μέγιστες τιμές σφαλμάτων \ac{ADCS} μετά τη σταθεροποίηση}
	\label{tab:adcsape}
	\begin{tabular}{@{}ll@{}}
		\toprule
		Σφάλμα                      & Τιμή                    \\ \midrule
		Απόλυτη Ακρίβεια Στόχευσης & \( < \SI{30}{\degree} \) \\
		Απόλυτη Ακρίβεια Γνώσης    & \( < \SI{1}{\degree} \) 
	\end{tabular}
\end{margintable}

Οι επιδόσεις του \ac{ADCS} μπορούν να αξιολογηθούν με μετρικές όπως αυτές που παρουσιάζονται στον \Cref{tab:adcsape}.

\subsection{\acf{COMMS}}

Το υποσύστημα communications (τηλεπικοινωνιών) είναι υπεύθυνο για τη μετάδοση δεδομένων μεταξύ της Γης και του δορυφόρου σε τροχιά. Τα μεταδιδόμενα δεδομένα χωρίζονται σε 3 διαφορετικές κατηγορίες\autocite{DDJF_TTC}:
\begin{itemize}
	\item \textbf{\acf{TC}}: Εντολές από τη Γη προς το δορυφόρο. Μπορούν να χρησιμοποιηθούν για να ζητήσουν πληροφορίες ή για να εκτελέσουν συγκεκριμένες ενέργειες στο CubeSat.
	\item \textbf{\acf{TM}}: Πληροφορίες που αποστέλλονται από τον δορυφόρο προς τη Γη, που συνήθως περιλαμβάνουν ζωτικές πληροφορίες, όπως τιμές αισθητήρων, κατάσταση συστήματος, τρέχουσα ώρα και συμβάντα.
	\item \textbf{Επιστημονικά δεδομένα}: Τα επιστημονικά δεδομένα που παράγονται από το ωφέλιμο φορτίο (payload). Αυτά είναι τα δεδομένα με τον μεγαλύτερο όγκο και αντιπροσωπεύουν τα κύρια επιστημονικά αποτελέσματα της αποστολής.
\end{itemize}

Είναι σημαντικό να αναφερθεί ότι η τροχιά του δορυφόρου επιτρέπει μόνο μια πολύ μικρή διάρκεια ορατότητας από τον Σταθμό Βάσης (\acf{GS}) κάθε μέρα, αυξάνοντας τις ανάγκες για αυτονομία και τη σημασία μιας σωστά εφαρμοσμένης μεθόδου \acs{FDIR}.

\begin{marginfigure}
	\includegraphics{satnogs-comms}
	\caption{Η πλακέτα SatNOGS COMMS}
\end{marginfigure}

Το κύριο συστατικό του υποσυστήματος \acs{COMMS} είναι η πλακέτα \textbf{SatNOGS COMMS} \autocite{surligas_satnogscomms_2021}, ένας \acs{RF} πομποδέκτης ανοικτού κώδικα που αναπτύσσεται από την \href{https://libre.space/}{LibreSpace Foundation}, βασισμένη στα τηλεπικοινωνιακά πρότυπα \acs{CCSDS}.

Η επικοινωνία πραγματοποιείται με τη χρήση 2 ζωνών συχνοτήτων στην περιοχή \acs{ISM}, \SI{436.5}{\mega\hertz} και \SI{2.425}{\giga\hertz}, μέσω μίας κεραίας διπόλων και μίας κατευθυντικής επιφανειακής κεραίας (patch antenna). Η χρήση των συχνοτήτων \acs{ISM} επιτρέπει την εύκολη ραδιοερασιτεχνική πρόσβαση στο δορυφόρο. Η πρώτη (\acs{UHF}) ζώνη εκπέμπει επίσης ένα περιοδικό σήμα \textbf{beacon} (ραδιοφάρος), που περιέχει κρίσιμες πληροφορίες σχετικά με την κατάσταση του \g{δορυφόρου}.

Το υποσύστημα τηλεπικοινωνιών είναι επίσης υπεύθυνο για την ανάλυση ηλεκτρομαγνητικής συμβατότητας (\acs{EMC}), καθώς και για το σχεδιασμό και την κατασκευή του Σταθμού Βάσης. Ο τελευταίος θα αποτελέσει μέρος του \textbf{SatNOGS}\autocite{white_overview_satellite_2018}, ενός παγκόσμιου δικτύου δορυφορικών επίγειων σταθμών που βασίζεται σε ανοικτές τεχνολογίες και ανοικτά δεδομένα.

\subsection{\acf{EPS}}

Το \ac{EPS} είναι το υποσύστημα υπεύθυνο για την παραγωγή, κατανομή και αποθήκευση ηλεκτρικής ενέργειας στον δορυφόρο. Είναι ένα κρίσιμο κομμάτι του CubeSat, λόγω της άμεσης εξάρτησης και των σχετικά αυξημένων ενεργειακών αναγκών πολλών υποσυστημάτων του, και θεωρείται πως είναι ο πιο πιθανός λόγος αποτυχίας των CubeSat σε τροχιά. \autocite{langer_reliability_cubesats_2016}

Το AcubeSAT έχει επιλέξει έναν συνδυασμό από \ac{COTS} προϊόντα για το \ac{EPS}:\autocite{DDJF_SYS}
\begin{itemize}
	\item Τα \textbf{ηλιακά πάνελ} (solar panels) αγοράζονται από την EnduroSat. 4 πάνελ διάστασης 3U καλύπτουν τις \(X\) και \(Y\) πλευρές, και ένα πάνελ 1U καλύπτει την \(-Z\) πλευρά.
	\item Η μονάδα \textbf{ελέγχου και διανομής ισχύος} (\ac{PCDU}) αγοράζεται από την NanoAvionics και προσφέρει 10 προστατευμένα κανάλια με 4 διαφορετικές τιμές τάσης, καθώς και 4 μετατροπείς \ac{MPPT}.
	\item The \textbf{battery pack}, also procured from NanoAvionics, contains 4 18650 Li-Ion cells in a 2S2P\footnote{2 series, 2 parallel} configuration.
	\item Οι \textbf{μπαταρίες}, επίσης αγορασμένες από τη NanoAvionics, αποτελούνται από 4 στοιχεία ιόντων λιθίου μορφής 18650.
\end{itemize}

\begin{margintable}
	\caption{Προϋπολογισμός ισχύος AcubeSAT σε κανονική λειτουργία}
	\label{tab:power_budget}
	\begin{tabularx}{\linewidth}{@{}lX@{}}
		\toprule
		\textbf{Καταναλωτής}            & \textbf{Ισχύς}            \\ \midrule
		\acs{ADCS}          & \SI{1.10}{\watt} \\
		\acs{COMMS}         & \SI{0.85}{\watt} \\
		\acs{EPS}           & \SI{0.99}{\watt} \\
		\acs{OBC}           & \SI{0.12}{\watt} \\
		\acs{SU}            & \SI{0.25}{\watt} \\ \midrule
		Σύνολο               & \SI{3.30}{\watt} \\
	    Μέση παραγόμενη ισχύς & \SI{4.24}{\watt} \\ \bottomrule
	\end{tabularx}
\end{margintable}

\FloatBarrier
\begin{comment}
A dynamic approach is taken with regards to power budget calculation:
\begin{compactenum}
	\item The in-orbit power generation is calculated for the duration of the mission using the \textbf{STK} software, taking into account satellite orientation, pointing profiles and eclipse, with a \SI{1}{\minute} resolution.
	\item The power consumption of the system is calculated on average for each different operational mode.
	\item \acs{MPPT} efficiencies and battery charge level are calculated for each timepoint, assuming worst-case thermal and electrical conditions
	\item A system-wide 10\% margin is applied to the results
\end{compactenum}


We have created a Python library consolidating the above steps\footurl{https://gitlab.com/acubesat/eps/power-budget} and producing the necessary outputs to prove the adequacy of the design.
\end{comment}


\begin{figure*}[h]
%	\begin{subfigure}[b]{.45\textwidth}
	\includegraphics[height=4cm]{Sun Pointing 11:00.total.pdf}
%	\end{subfigure}
	\hfill
%	\begin{subfigure}[b]{.45\textwidth}
	\includegraphics[height=4cm]{Sun Pointing 11:00.discharge.pdf}
%	\end{subfigure}
%	\includegraphics[width=.45\textwidth]{/home/kongr45gpen/Pictures/jeka8ara kapoglis.png}

	\caption[Δυναμική ανάλυση προϋπολογισμού ισχύος]{Δυναμική ανάλυση προϋπολογισμού ισχύος. Αριστερά: Κατανάλωση \& παραγωγή ισχύος στην τροχιά. Δεξιά: Επίπεδο εκφόρτισης μπαταρίας κατά τη διάρκεια της αποστολής}
\end{figure*}

\subsection{\acf{OBDH}}
\label{sec:obdh}

Το υποσύστημα \ac{OBDH} είναι υπεύθυνο για το σχεδιασμό των διεπαφών δεδομένων του διαστημικού σκάφους, καθώς και για το σχεδιασμό της πλακέτας \textbf{\acf{OBC}}, η οποία είναι επιφορτισμένη με τον έλεγχο των βασικών λειτουργιών του AcubeSAT. \autocite{DDJF_OBDH}

Η πλακέτα \ac{OBC} περιέχει τα βασικά εργαλεία για την εξασφάλιση της αυτονομίας, και βασίζεται σε έναν ανθεκτικό στην ακτινοβολία μικροελεγκτή \foothref{https://www.microchip.com/wwwproducts/en/SAMV71Q21RT}{Microchip SAMV71Q21RT}, και μια μνήμη \acs{MRAM} που χρησιμοποιείται για την αποθήκευση κρίσιμων δεδομένων. Η πλακέτα φιλοξενεί επίσης τον "εγκέφαλο" του υποσυστήματος \ac{ADCS}, ως μέτρο εξοικονόμησης χώρου.

\begin{marginfigure}
	\centering
	\includegraphics[width=.7\textwidth]{SAMV71Q21RT}
	\caption{Ο μικροελεγκτής \texttt{SAMV71Q21RT}}
	\label{fig:samv71}
\end{marginfigure}

AcubeSAT's data interface is using a cold-redundant \ac{CAN} bus to facilitate cross-subsystem communication, selected due to its robustness and reliability. \autocite{bouwmeester_survey_implementation_2017} AcubeSAT boards implement the PC/104 mechanical interface.\autocite{PC104}

Η διεπαφή δεδομένων μεταξύ των υποσυστημάτων του AcubeSAT χρησιμοποιεί ένα \ac{CAN} bus σε \textbf{ψυχρό πλεονασμό} (cold redundancy), το οποίο επιλέχθηκε λόγω της υψηλής αξιοπιστίας του. \autocite{bouwmeester_survey_implementation_2017} Οι πλακέτες του AcubeSAT ικανοποιούν τις μηχανικές απαιτήσεις του προτύπου PC/104. \autocite{PC104}

\subsection{\acf{OBSW}}


Το υποσύστημα \ac{OBSW} είναι υπεύθυνο για το σχεδιασμό και την ανάπτυξη του λογισμικού του νανοδορυφόρου. Η γλώσσα που επιλέχθηκε να χρησιμοποιηθεί στους 4 μικροελεγκτές είναι μια περιορισμένη μορφή της \textbf{C++}, και ο κώδικας ελέγχεται από μια σειρά προτύπων, στατικών αναλυτών και unit tests.\autocite{DDJF_OBSW} Όλο το λογισμικό εκτελείται επάνω στο λειτουργικό σύστημα πραγματικού χρόνου Free\acs{RTOS}.


\subsection{\acf{OPS}}

Το υποσύστημα Operations είναι υπεύθυνο για το σχεδιασμό των λειτουργιών \& διαδικασιών του διαστημικού σκάφους και για τη διασφάλιση της λειτουργικότητας, της δυνατότητας ελέγχου και της παρατηρησιμότητας του δορυφόρου πριν και κατά τη διάρκεια της τροχιάς του.

Κατά τη διάρκεια της αποστολής, το AcubeSAT μπορεί να βρίσκεται σε μία από τις ακόλουθες\textbf{λειτουργίες συστήματος}:\autocite{MDO}
\begin{itemize}
	\item \textbf{Λειτουργία Εκτόξευσης} (Launch/Off mode): Ο δορυφόρος είναι πλήρως απενεργοποιημένος και κανένα υποσύστημα δεν λαβάνει ισχύ. Αυτή η λειτουργία αναπαριστά την κατάσταση του διαστημικού σκάφους μέσα στον "deployer", όπου δεν επιτρέπεται η ενεργοποίηση κανενός ηλεκτρονικού στοιχείου,\autocite[req. 3.3.3]{CDS13} και το CubeSat πρέπει να βρίσκεται σε πλήρη αδράνεια.
	
	\item \textbf{Λειτουργία Εκκίνησης} (Commissioning mode): Αυτή η λειτουργία ξεκινάει μόλις ο CubeSat εξέλθει από τον deployer, δηλαδή όταν ολοκληρωθεί η εκτόξευση. Περιλαμβάνει τις αρχικές ενέργειες εκκίνησης του διαστημικού σκάφους, συμπεριλαμβανομένης της εκτύλιξης της κεραίας, και της μείωσης της γωνιακής ταχύτητας. Σε αυτήν τη λειτουργία δεν παράγονται επιστημονικά δεδομένα.
	
	\item \textbf{Κανονική Λειτουργία} (Nominal mode): Εδώ θα βρίσκεται ο δορυφόρος τον περισσότερο χρόνο. Εκτός από τις απαραίτητες λειτουργίες αυτονομίας και τη φόρτιση της μπαταρίας, το CubeSat θα μεταδίδει επίσης τηλεμετρία και επιστημονικά δεδομένα. Εω δεν πραγματοποιείται καμία επιστημονική εργασία, εκτός από τυχόν ελέγχους υγείας. Η κανονική λειτουργία είναι επίσης η μόνη λειτουργία κατά την οποία ο δορυφόρος εκτελεί στόχευση στον ήλιο ή στο ναδίρ (\Cref{sec:adcs}).
	
	\item \textbf{Επιστημονική Λειτουργία} (Science mode): Εδώ πραγματοποιείται το κύριο πείραμα και παράγονται τα επιστημονικά δεδομένα. Αυτή η λειτουργία περιλαμβάνει τη δράση του υδραυλικού συστήματος, τη λειτουργία του τσιπ μικρορευστομηχανικής, την καλλιέργεια των κυττάρων και την περιοδική λήψη εικόνων με τη χρήση του μικροσκοπίου.
	
	Το AcubeSAT έχει χωρίσει την επιστημονική λειτουργία σε \textbf{3 διαφορετικές φάσεις}, που ονομάζονται υπο-πειράματα \(\alpha\), \(\beta\) και \(\gamma\), διαρκούν 72 ώρες το καθένα και εκτελούνται σε διαφορετικά χρονικά σημεία της αποστολήςμ ώστε να διερευνηθεί η χρονική εξάρτηση των παρατηρούμενων αποτελεσμάτων.
	
	\item \textbf{Ασφαλής Λειτουργία} (Safe mode): Συνηθίζεται τα διαστημικά συστήματα να περιλαμβάνουν μια \emph{ασφαλή λειτουργία},\autocite[385]{aguirre_introduction_space_2013} όπου το διαστημικό σκάφος απενεργοποιεί όλα τα μη απαραίτητα συστήματα και διαδικασίες, προκειμένου να ανταποκριθεί σε σημαντικές δυσλειτουργίες που δεν μπορούν να διορθωθούν αυτομάτως. Η ασφαλής λειτουργία προορίζεται ως μια καλά καθορισμένη και καλά δοκιμασμένη λειτουργία, η οποία είναι εύκολη στη συντήρηση και μειώνει τον κίνδυνο οποιασδήποτε καταστροφικής βλάβης.
	
	Στον AcubeSAT, η λειτουργικότητα του διαστημικού σκάφους είναι σημαντικά μειωμένη και το προφίλ στόχευσης προσπαθεί να πετύχει μόνο σταθεροποίηση. Ωστόσο, η επικοινωνία \ac{UHF} και η μετάδοση του περιοδικού beacon εξακολουθούν να είναι ενεργές για λόγους παρατηρησιμότητας.
\end{itemize}

\begin{table*}[h]
	\centering
	\caption{Σύνοψη της λειτουργικότητας του AcubeSAT σε διαφορετικές Λειτουργίες Συστήματος}
	\label{tab:acubesatmodes}
	\begin{tabular}{@{}llllll@{}}
		\toprule
		Υποσύστημα    & Εκτόξευση & Εκκίνηση & Κανονική                 & Επιστημονική        & Ασφαλής             \\ \midrule
		\acs{ADCS}  & \color{off} Off    & Σταθεροποίηση     & \color{on} Στόχευση                & Σταθεροποίηση     & Σταθεροποίηση       \\
		\acs{COMMS} & \color{off} Off    & \acs{UHF} μόνο & \color{on} \acs{UHF} και S-Band    & \acs{UHF} μόνο & \acs{UHF} μόνο   \\
		\acs{EPS}   & \color{off} Off    & \color{on} On             & \color{on} On                      & \color{on} On             & \color{on} On               \\
		\acs{OBC}   & \color{off} Off    & \color{on} On             & \color{on} On                      & \color{on} On             & \color{on} On               \\
		\acs{SU}    & \color{off} Off    & \color{off} Off            & Συντήρηση \& δεδομένα & \color{on} On             & Συντήρηση \\ \bottomrule
	\end{tabular}
	\vspace{1em}
\end{table*}


Κάθε λειτουργία συνδέεται με ένα διάγραμμα \textbf{λειτουργικής ροής}, το οποίο δείχνει μια υψηλού επιπέδου περιγραφή των διαδικασιών που εκτελούνται κατά τη διάρκειά της.\autocite{acubesat_functional_2021}

\begin{figure}
	\centering
	\includegraphics[width=.6\textwidth]{AcubeSAT_System_Modes}
	\caption[][3cm]{Όλες οι μεταβάσεις μεταξύ των Λειτουργιών Συστήματος}
	\label{fig:transitions}
\end{figure}


\subsection{Structural}

Το υποσύστημα Structural έχει αναλάβει:
\begin{itemize}
	\item Την ανάλυση και η διαμόρφωση του \ac{COTS} σκελετού 3U (\Cref{fig:structure}) που στεγάζει όλα τα εξαρτήματα του CubeSat και είναι κατασκευασμένος από αλουμίνιο. Οι αναλύσεις δονήσεων είναι ιδιαίτερα σημαντικές, καθώς διερευνούν κατά πόσο ο CubeSat μπορεί να αντέξει τα μηχανικά φορτία κατά την εκτόξευση.
	\item Τον πλήρη σχεδιασμό, κατασκευή και συναρμολόγηση του \textbf{δοχείου πειράματος} και του ενσωματωμένου σε αυτό πλαστικού "unibody" (\Cref{fig:container}).
\end{itemize}

\begin{marginfigure}
	\centering
	\includegraphics[width=.5\textwidth]{structure}
	\caption{Ο \acs{COTS} σκελετός του CubeSat}
	\label{fig:structure}
\end{marginfigure}

\subsection{\acf{SYE}}

The \acl{SYE} subteam serves as the technical authority for the satellite. It is responsible for coordinating the developments and interfaces between subsystems, ensuring the conformance to standards and technical requirements, and identifying \& resolving all issues arising from the complex multi-discipline design of the CubeSat.

Additionally, the \ac{SYE} team is responsible for some specific technical developments that do not belong in any of the other subsystems, such as \ac{RAMS}, \ac{FMEA}, harnessing and the \acl{MAIV} plan.

Η υποομάδα του \acl{SYE} λειτουργεί ως τεχνική αρχή του δορυφόρου. Είναι υπεύθυνη για το συντονισμό των εργασιών και της επικοινωνίας μεταξύ των υποσυστημάτων, τη συμμόρφωση με τα πρότυπα και τις τεχνικές προδιαγραφές, καθώς και τον εντοπισμό \& την επίλυση όλων των ζητημάτων που προκύπτουν από τον πολύπλοκο σχεδιασμό ενός δορυφορικού συστήματος.

Επιπλέον, η ομάδα \ac{SYE} είναι υπεύθυνη για ορισμένα τεχνικά κομμάτια που δεν ανήκουν σε κανένα από τα άλλα υποσυστήματα, όπως την ανάλυση αξιοπιστίας (\acs{RAMS}), την ανάλυση αποτυχιών \& αποτελεσμάτων τους (\ac{FMEA}), την καλωδίωση και το πλάνο κατασκευής \& δοκιμών (\acs{MAIV}).

\subsection{\acf{SU}}

Η υποομάδα \acl{SU} είναι υπεύθυνη για τη σχεδίαση και την υλοποίηση του επιστημονικού φορτίου της αποστολής, δηλαδή τη μελέτη της επιδράσεων του περιβάλλοντος Χαμηλής Γήινης Τροχιάς (\ac{LEO}) σε ζυμομύκητες.

Το επιστημονικό φορτίο αποτελείται από τα ακόλουθα λειτουργικά μέρη: \autocite{DDJF_PL}
\begin{compactitem}
	\item Το \textbf{δοχείο πειράματος}, μια δομή αλουμινίου μεγέθους σχεδόν 2U, σε τυπική ατμοσφαιρική πίεση και σχεδιασμένη να φιλοξενεί όλα τα όργανα του πειράματος. Το δοχείο φιλοξενεί επίσης ένα μονόσωμα (\textbf{"unibody"}) που στηρίζει μηχανικά όλα τα εξαρτήματα.
	\item Ένα \textbf{τσιπ μικρορευστομηχανικής} (microfluidic chip) βασισμένο σε \ac{PDMS}, που φιλοξενεί 384 θαλάμους ικανούς να εξετάσουν 190 διαφορετικά στελέχη των μυκητών \emph{Saccharomyces Cerevisiae} για κάθε υποπείραμα.
	\item Ένα \textbf{fluidic system} που αποτελείται από 2 αντλίες, 14 ηλεκτρομαγνητικές βαλβίδες και 3 σακούλες υγρών.
	\begin{marginfigure}
		\includegraphics{chipFluor}
		\caption[Παράδειγμα παραγόμενης εικόνας]{Παράδειγμα παραγόμενης εικόνας (\parencite{DDJF_PL})}
		\label{fig:chip_fluor}
	\end{marginfigure}
	\item Ένα \textbf{οπτικό σύστημα} που λειτουργεί ως μικροσκόπιο, το οποίο περιέχει μια κάμερα και μια σειρά από λαμπτήρες, φίλτρα και ένα φακό
	\item Έναν αριθμός \textbf{θερμαντικών σωμάτων} για τον αυστηρό έλεγχο των θερμοκρασιών λειτουργίας των εξαρτημάτων
	\item Έναν αριθμός πλεοναζόντων \textbf{αισθητήρων} για περιβαλλοντικές μετρήσεις
	\item Μία πλακέτα που περιέχει τον μικροελεγκτή και τα υπόλοιπα εξαρτήματα ελέγχου
\end{compactitem}

\begin{marginfigure}
	\centering
	\includegraphics[width=.9\textwidth]{Glass_Payload}
	\caption{Διαφανής προβολή του δοχείου πειράματος και του εσωτερικού του}
	\label{fig:container}
\end{marginfigure}

Το πείραμα επιβάλλει κάποιους περιορισμούς στο σχεδιασμό του \ac{FDIR}:
\begin{enumerate}
	\item \textbf{Διακοπή} \g{ενός από τα τρία 72ωρα υποπειράματα κατά τη διάρκεια της εκτέλεσης μπορεί να σημαίνει πλήρη απώλεια του υποπειράματος. Ο αντίκτυπος ενός τέτοιου γεγονότος εξαρτάται από τη διάρκεια και τη χρονική στιγμή της εμφάνισής του. Σε κάθε περίπτωση, επαρκής παρατηρησιμότητα θα επιτρέψει στο επίγειο πείραμα να μιμηθεί όσο το δυνατόν περισσότερο τις συνθήκες εντός τροχιάς.}
	\item \textbf{Το πάγωμα} των υγρών στο εσωτερικό του τσιπ και των σωλήνων μπορεί να οδηγήσει σε μόνιμη βλάβη της διάταξης. Ως εκ τούτου, μπορεί να απαιτηθεί η ενεργή θέρμανση ακόμη και κατά τη διάρκεια της ασφαλούς λειτουργίας, μετά την εκτέλεση του πρώτου υπο-πειράματος και την εισροή υγρού στο σύστημα. Αυτά τα χαρακτηριστικά επιβάλλουν περαιτέρω περιορισμούς στην ελάχιστη διαθεσιμότητα του συστήματος, ανάλογα με τις περιβαλλοντικές συνθήκες.
\end{enumerate}

\begin{figure*}
	\centering
	\caption[Το τσιπ μικρορευστομηχανικής και ο διαχωρισμός του σε 3 επιμέρους υποπειράματα και 1 γραμμή δοκιμής]{Το τσιπ μικρορευστομηχανικής και ο διαχωρισμός του σε 3 επιμέρους υποπειράματα και 1 γραμμή δοκιμής. Οι είσοδοι των υγρών φαίνονται στην αριστερή πλευρά του τσιπ, ενώ οι έξοδοι στα δεξιά. \emph{Πράσινο:} στρώμα ροής. \emph{Μπλε:} στρώμα ελέγχου.}
	\label{fig:chip}
	\includegraphics{final_chip.pdf}
	\begin{tikzpicture}[overlay]
	\draw[very thick,dashed,solarized-base01] (5,10.9) rectangle (-7,11.5) node[below right] {Δοκιμαστική};
	\draw[very thick,dashed,solarized-green] (5,7.85) rectangle (-7,10.8) node[below right] {Υποπείραμα $\alpha$};
	\draw[very thick,dashed,solarized-blue] (5,4.95) rectangle (-7,7.8) node[below right] {Υποπείραμα $\beta$};
	\draw[very thick,dashed,solarized-red] (5,2) rectangle (-7,4.9) node[below right] {Υποπείραμα $\gamma$};
	\end{tikzpicture}
\end{figure*}

\subsection{Thermal}


Η υποομάδα Thermal είναι υπεύθυνη για τη θερμική ανάλυση του δορυφόρου, όπου η εισερχόμενη ηλιακή ακτινοβολία συνδυάζεται με την απαγωγή θερμότητας των υποσυστημάτων, με σκοπό τον προσδιορισμό των χειρότερων θερμοκρασιών που αντιμετωπίζει ο δορυφόρος, σε θερμές και ψυχρές συνθήκες.

Τα αποτελέσματα της θερμικής ανάλυσης οδηγούν συνήθως στην εφαρμογή παθητικών ή ενεργητικών μεθόδων θερμικού ελέγχου. Ειδικότερα στο AcubeSAT, χρησιμοποιούνται 3 ηλεκτρονικά ελεγχόμενα θερμαντικά σώματα για τις μπαταρίες, το πειραματικό τσιπ και τις βαλβίδες.

\subsection{Trajectory}

Η υποομάδα Trajectory είναι υπεύθυνη για την ανάλυση της τροχιάς του διαστημικού σκάφους, την αποτίμηση των επιπτώσεων της ακτινοβολίας, τη συμμόρφωση του δορυφόρου με τους κανονισμούς για τα διαστημικά σκουπίδια και την εκτίμηση της διάρκειας ζωής του σε τροχιά.

Οι απαιτήσεις του AcubeSAT δεν υπαγορεύουν τη χρήση προωθητήρων, πράγμα που σημαίνει ότι η τροχιά του δορυφόρου καθορίζεται αποκλειστικά από την εκτόξευση και δεν μπορεί να τροποποιηθεί κατά την πτήση. Καθώς πληροφορίες για την εκτόξευση είναι άγνωστες μέχρι κάποιο χρονικό διάστημα πριν από την παράδοση του δορυφόρου, εκτελείται ένα σύνολο αναλύσεων ευαισθησίας για τον προσδιορισμό των επιτρεπόμενων τροχιών. \autocite{MDO,anthopoulos_orbital_analysis_2020}
\begin{figure}
	\includegraphics{GmatScreenShot_002}
	\caption[Επίγειο ίχνος μιας πιθανής τροχιάς του AcubeSAT]{Επίγειο ίχνος μιας πιθανής τροχιάς του AcubeSAT, σχεδιασμένο με χρήση του εργαλείου \acl{GMAT} της NASA}
	\label{fig:gmat}
\end{figure}

% Maybe add some info about the sensitivity results and LTAN value?
% No

\section{Χρησιμοποιούμενα εργαλεία}
\draft{Here we write a small paragraph about OCDT and other MBSE tools and utilities used by AcubeSAT or developed in-house...}

\chapter{Η φιλοσοφία \ac{FDIR} του SAVOIR}
\label{cap:savoir}

\section{Το Πρότυπο Αξιοποίησης Πακέτων \acs{ECSS}}

\subsection{Οι Υπηρεσίες \acs{ECSS}}

\begin{figure}
	\includegraphics{ECSS-rq}
	\caption[][-1em]{The \ac{PUS} data transfer model}
	\label{fig:pusmodel}
\end{figure}

blablablab \autocite{ECSS-E-ST-70-41C,ECSS-E-70-41A,kaufeler_esa_standard_1994}

\begin{compactitem}
	\item \textbf{\texttt{ST[01]}: Request verification}
	
	Παρέχει αναφορές επιβεβαίωσης ή αποτυχίας για εκτελούμενες εντολές. Αυτή η υπηρεσία ουσιαστικά ενημερώνει τους χειριστές για την κατάσταση των \ac{TC} που αποστέλλονται στο διαστημικό σκάφος και αναφέρει τυχόν σφάλματα που συνέβησαν κατά την εκτέλεση.
	
	\item \textbf{\texttt{ST[02]}: Device access}
	
	Επιτρέπει την ενεργοποίηση, τον έλεγο και τη ρύθμιση των περιφερειακών συσκευών που δεν υποστηρίζουν το πρότυπο \ac{PUS}, αλλά βασίζονται σε απλούστερα πρωτόκολλα επικοινωνίας.
	
	\item \textbf{\texttt{ST[03]}: Housekeeping}
		
		Παράγει περιοδικές αναφορές που περιέχουν τιμές παραμέτρων. Η υπηρεσία αυτή ουσιαστικά συνθέτει τους περιοδικούς ραδιοφάρους (\textbf{\acs{RF} beacons}) του δορυφόρου, χωρίς προηγούμενο ερέθισμα.
		
		\item \textbf{\texttt{ST[04]}: Parameter statistics reporting}
		
		Επιτρέπει την αναφορά στατιστικών στοιχείων (ελάχιστο, μέγιστο, μέσος όρος, τυπική απόκλιση) για συγκεκριμένες παραμέτρους σε καθορισμένα χρονικά διαστήματα.
		
		\item \textbf{\texttt{ST[05]}: Event reporting}
		
		Δημιουργεί αναφορές όταν λαμβάνουν χώρα αξιοσημείωτα συμβάντα επί του σκάφους, όπως:
		\begin{compactitem}
			\item Αυτόνομες ενέργειες
			\item Ανιχνευμένες βλάβες ή ανωμαλίες
			\item Προκαθορισμένα βήματα μιας διαδικασίας
		\end{compactitem}
		
		\item \textbf{\texttt{ST[06]}: Memory management}
		
		Επιτρέπει την απευθείας ανάγνωση και εγγραφή σε μονάδες μνήμης. Αυτό μπορεί να είναι χρήσιμο για σκοπούς αποσφαλμάτωσης, ανάκτησης δεδομένων της αποστολής, ή φόρτωσης εντελώς νέου λογισμικού. Η υπηρεσία παρέχει επίσης τη δυνατότητα κατεβάσματος και ανεβάσματος αρχείων σε ένα σύστημα αρχείων (filesystem).
		
		\item \textbf{\texttt{ST[07]}: Task management} \emph{(καταργημένο)}
		
		Επιτρέπει τη διακοπή, την αναστολή ή την επανάληψη εργασιών λογισμικού σε περίπτωση έκτακτης ανάγκης. Η υπηρεσία αυτή έχει αφαιρεθεί από το πρότυπο και παρατίθεται για ιστορικούς λόγους.
		
		\item \textbf{\texttt{ST[08]}: Function management}
		
		Παρέχει τη δυνατότητα εκτέλεσης προκαθορισμένων ενεργειών που μπορούν να λάβουν περαιτέρω παραμέτρους. Οι ενέργειες αυτές μπορεί να αντιστοιχούν σε πειραματικές διαδικασίες, γενικότερες λειτουργίες ή οτιδήποτε άλλο.
		
		\item \textbf{\texttt{ST[09]}: Time management}
		
		Επιτρέπει την περιοδική αναφορά της τιμής του ρολογιού του CubeSat, για σκοπούς παρατηρησιμότητας και συσχέτισης.
		
		\item \textbf{\texttt{ST[10]}: Time packet} \emph{(καταργημένο)}
		
		Χρησιμοποιήθηκε στο παρελθόν για την παροχή πληροφοριών ρολογιού. Η υπηρεσία αυτή έχει αφαιρεθεί από το πρότυπο και παρατίθεται για ιστορικούς λόγους.
		
		\item \textbf{\texttt{ST[11]}: Time-based scheduling}
		
		Επιτρέπει στους χειριστές να προγραμματίζουν (\textbf{"time-tag"}) τηλεεντολές για εκτέλεση σε μελλοντικές χρονικές στιγμές, αντί για αμέσως.
		
		\item \textbf{\texttt{ST[12]}: On-board monitoring}
		
		Αυτή η υπηρεσία επιτρέπει τον έλεγχο των τιμών των παραμέτρων για να διασφαλιστεί ότι παραμένουν εντός ρυθμιζόμενων ορίων. Κάθε φορά που τα όρια παραβιάζονται, δημιουργείται ένα συμβάν (\texttt{ST[05]}) για περαιτέρω επεξεργασία.
		
		\item \textbf{\texttt{ST[13]}: Large packet transfer}
		
		Παρέχει μια μέθοδο τμηματοποίησης (segmentation) μηνυμάτων, για συμβολοσειρές που είναι πολύ μεγάλες για να χωρέσουν στο μέγιστο επιτρεπόμενο μήκος για \ac{TC} ή \ac{TM}.
		
		\item \textbf{\texttt{ST[14]}: Real-time forwarding control}
		
		Αυτή η υπηρεσία είναι υπεύθυνη για τον έλεγχο της παραγόμενης τηλεμετρίας που εκπέμπεται άμεσα προς το Σταθμό Βάσης.
		
		\item \textbf{\texttt{ST[15]}: On-board storage and retrieval}
		
		Η υπηρεσία αυτή επιτρέπει την αποθήκευση των παραγόμενων αναφορών, καθώς και την ανάκτησή τους όταν ο δορυφόρος περνάει επάνω από το Σταθμό Βάσης.
		
		\item \textbf{\texttt{ST[16]}: On-board traffic management} \emph{(deprecated)}
		
		Επιτρέπει την παρακολούθηση της κατάστασης και του φόρτου ενός διαύλου δεδομένων. Η υπηρεσία αυτή έχει αφαιρεθεί από το πρότυπο και παρατίθεται για ιστορικούς λόγους.
		
		\item \textbf{\texttt{ST[17]}: Test}
		
		Η υπηρεσία αυτή παρέχει απλές εντολές για ελέγχους υγείας του δορυφόρου.
		
		\item \textbf{\texttt{ST[18]}: On-board operations procedure}
		
		Επιτρέπει τη φόρτωση, τον έλεγχο (εκκίνηση, αναστολή, συνέχιση, διακοπή) και τη ρύθμιση των "operations procedures", οι οποίες είναι ακολουθίες εντολών γραμμένες σε κάποια ερμηνευμένει γλώσσα προγραμματισμού.
		
		\item \textbf{\texttt{ST[19]}: Event-action}
		
		Παρέχει τη δυνατότητα αυτόνομης εκτέλεσης \acp{TC} όταν λαμβάνει χώρα ένα συμβάν \texttt{ST[05]}.
		
		\item \textbf{\texttt{ST[20]}: On-board parameter management}
		
		Παρέχει τη δυνατότητα ανάγνωσης και αλλαγής τιμών των παραμέτρων του δορυφόρου. Οι παράμετροι είναι μερικές από τις πιο σημαντικές οντότητες που ορίζονται στο \acs{PUS} και μπορούν να αντιπροσωπεύουν:
		\begin{itemize}
			\item Βασικές ρυθμίσεις του συστήματος ή άλλων στοιχείων
			\item Μετρήσεις αισθητήρων και άλλες τιμές τηλεμετρίας
			\item Αποτελέσματα και διαγνωστικά του \ac{FDIR}
		\end{itemize}
		
		\item \textbf{\texttt{ST[21]}: Request sequencing}
		
		Επιτρέπει στους χειριστές να φορτώνουν σειρές \acp{TC} για να εκτελεστούν με διαδοχική σειρά.
		
		\item \textbf{\texttt{ST[22]}: Position-based scheduling}
		
		Παρέχει τη δυνατότητα εκτέλεσης \acp{TC} όταν το σκάφος φτάσει σε ένα συγκεκριμένο σημείο της τροχιάς του.
		
		\item \textbf{\texttt{ST[23]}: File management}
		
		Επιτρέπει την εκτέλεση διαχειριστικών εντολών σε τυχόν συστήματα αρχείων στον δορυφόρο, όπως \emph{αντιγραφή}, \emph{μετακίνηση}, \emph{διαγραφή}, ή \emph{κλείδωμα}.
\end{compactitem}

\section{Το πρότυπο SAVOIR}

\begin{figure*}[h]
	\includegraphics{../cdr/04 FMEA/media/FDIRpus}
	\caption{blablabla}
\end{figure*}

\chapter{\ac{FDIR} στο AcubeSAT}
\label{cap:acufdir}

\section{Βασικές αρχές του \ac{FDIR}}

\draft{\begin{itemize}
		\item The 7 AcubeSAT FDIR principles
		\item SAVOIR FDIR requirements and compliance
\end{itemize}}

\section{Μελέτη διαφορετικών αρχιτεκτονικών}

\begin{figure}
	\centering
	\includegraphics[width=.5\textwidth]{demoplot}
	\caption{\draft{Error rates}}
\end{figure}

\FloatBarrier
\section{Failure causes and recovery actions}

\subsection{Failure causes}

\subsection{Preventive actions}

\subsection{Corrective actions}

\section{\ac{FDIR} operating modes}
\label{sec:fdir_operating_modes}

\chapter{Πρακτική επίδειξη του \ac{FDIR}}
\label{cap:practical}

Ως πείραμα "proof-of-concept" για την υλοποίηση του \ac{FDIR} του AcubeSAT, προετοιμάσαμε μια πρακτική διάταξη για την προσομοίωση της συμπεριφοράς του δορυφόρου (\Cref{fig:block}). Η διάταξη αποτελείται από:
\begin{compactitem}
	\item Έναν Cortex-M7 \textbf{μικροελεγκτή}, που χρησιμοποιείται για την προσομοίωση ενός \textbf{υποσυστήματος δορυφόρου}
	\item Έναν αριθμός πλεονάζοντων \textbf{αισθητήρων} θερμοκρασίας, που προσομοιώνουν πιθανά σημεία \textbf{αστοχίας}.
	\item Το συνοδευτικό \textbf{λογισμικό} που περιλαμβάνει την υλοποίηση των υπηρεσιών \ac{ECSS} και της λογικής \ac{SAVOIR} \ac{FDIR}.
	\item Έναν υπολογιστή, που χρησιμεύει ως \textbf{σταθμός βάσης} για την παροχή των απαραίτητων δυνατοτήτων ελέγχου και παρατήρησης.
\end{compactitem}

\begin{figure*}[h]
	\includegraphics{SystemDescription}
	\caption{Μπλοκ διάγραμμα υψηλού επιπέδου της πειραματικής διάταξης}
	\label{fig:block}
\end{figure*}
\section{Περιγραφή Συστήματος}

\subsection{Λειτουργικότητα}
\label{sec:tsvcd}

Προκειμένου να εξομοιώσουμε τις πιο βασικές λειτουργίες ενός υποσυστήματος διαστημικού σκάφους, υλοποιήσαμε ένα σύστημα με μία μόνο λειτουργική προδιαγραφή:
\begin{quote}
	\texttt{RQ-010}: Το σύστημα πρέπει να μετρά και να μεταδίδει τη θερμοκρασία περιβάλλοντος.
\end{quote}

Προκειμένου να δικαιολογήσουμε μια υλοποίηση \ac{FDIR} για αυτό το σύστημα, θα εισάγουμε μια προδιαγραφή αξιοπιστίας:
\begin{quote}
	\texttt{RQ-020}: Καμία μεμονωμένη αποτυχία σε κάποιο μετρητικό στοιχείο δεν πρέπει να οδηγήσει σε απώλεια της λειτουργικότητας του συστήματος
\end{quote}

Ο λεπτομερής σχεδιασμός αυτού του απλού συστήματος επίδειξης παρουσιάζεται στις επόμενες ενότητες, και καταστρώθηκε έτσι ώστε να ταιριάζει όσο το δυνατόν περισσότερο με τη λειτουργικότητα, τις διεπαφές, το σχεδιασμό και το λογισμικό του νανοδορυφόρου AcubeSAT.

\subsection{Υλικό}

Το κέντρο του συστήματος επίδειξης είναι ο \textbf{μικροελεγκτής} (\ac{MCU}) που χρησιμοποιείται για την προσομοίωση του σχεδιασμού και της λειτουργικότητας ενός από τα υποσυστήματα του AcubeSAT (\Cref{sec:obdh}). Ο επιλεγμένος μικροελεγκτής είναι ο Atmel \texttt{ATSAMV71Q21} που φιλοξενείται στην αναπτυξιακή πλακέτα \foothref{https://www.microchip.com/Developmenttools/ProductDetails/ATSAMV71-XULT}{\texttt{ATSAMV71-XULT}}. Αυτός ο μικροελεγκτής είναι λειτουργικά πανομοιότυπος με αυτόν που θα χρησιμοποιηθεί στην τροχιά, διαθέτοντας έναν 32-bit πυρήνα ARM Cortex-M7 με μνήμες \SI{2}{\mebi\byte} flash και \SI{384}{\kibi\byte} \acs{SRAM}, και μέγιστη ταχύτητα ρολογιού \SI{300}{\mega\hertz}.

Ο μικροελεγκτής συνδέεται με δύο \textbf{αισθητήρες θερμοκρασίας} οι οποίοι χρησιμοποιούνται για την προσομοίωση εξαρτημάτων του υποσυστήματος που είναι επιρρεπή σε βλάβες. Οι επιλεγμένοι αισθητήρες είναι ο ι\foothref{https://www.microchip.com/wwwproducts/en/MCP9808}{\texttt{MCP9808}} της Microchip, οι οποίοι προσφέρουν ακριβή και ταχεία ανάγνωση της θερμοκρασίας μέσω ενός διαύλου \ac{I2C}. Η μέγιστη δυνατή περίοδος δειγματοληψίας για τον αισθητήρα είναι \SI{250}{\milli\second}.

\marginnote{%
\textbf{Ψυχρός πλεονασμός} (cold redundancy): Μόνο το ένα εξάρτημα λειτουργεί, ενώ τα άλλα όχι.

\textbf{Θερμός πλεονασμός} (warm redundancy): Ένα εξάρτημα λειτουργεί πλήρως, ενώ τα άλλα έχουν μειωμένη λειτουργικότητα.

\textbf{Ενεργός πλεονασμός} (hot redundancy): Δύο ή περισσότερα ταυτόχρονα ενεργά εξαρτήματα λειτουργούν παράλληλα. \parencite{SAVOIR-HB-003}
}

Οι δύο αισθητήρες είναι συνδεδεμένοι σε διάταξη \textbf{ενεργού πλεονασμού}, λόγω της εξαιρετικά χαμηλής ισχύος λειτουργίας τους. Οι δύο αισθητήρες είναι συνδεδεμένοι σε διαφορετικούς διαύλους \ac{I2C}, έτσι ώστε πιθανή βλάβη του ενός διαύλου να μην επηρεάζει τη λειτουργία του άλλου αισθητήρα.

\paragraph{Διεπαφή \acs{USB}} Για τη λήψη \acl{TM} και τη μετάδοση \acl{TC} στο υποσύστημα επίδειξης, ο σχεδιασμός περιλαμβάνει μια σύνδεση \acl{USB} με έναν τυπικό υπολογιστή. Η σύνδεση αυτή χρησιμοποιεί το περιφερειακό \acs{UART} του μικροελεγκτή, το οποίο μεταφέρει αποκλειστικά μηνύματα \acs{ECSS} μεταξύ του μικροελεγκτή και του υπολογιστή. Τα μηνύματα αυτά περιλαμβάνουν τις τυπικές αναφορές \acs{TM} και τα αιτήματα \acs{TC}, αλλά και μηνύματα καταγραφής που προορίζονται για διαγνωστικούς σκοπούς.

Καθώς το πρωτόκολλο \acs{UART} δεν προσφέρει κάποιο μηχανισμό για διαχωρισμό πακέτων, εφαρμόζουμε κωδικοποίηση \acs{COBS} \autocite{cheshire_consistent_overhead_1997} για όλα τα μεταδιδόμενα μηνύματα.

\begin{figure*}[h]
	\includegraphics{ElectricalSchematic}
%	\caption[Απλοποιημένο σχήματικό της εφαρμογής]{Απλοποιημένο σχηματικό της εφαρμογής. Οι δύο αισθητήρες είναι συνδεδεμένοι μέσω \ac{I2C} με τις απαραίτητες αντιστάσεις ανύψωσης στα \SI{3.3}{\volt}. Η τροφοδοσία τους ελέγχεται απευθείας από τις εξόδους του μικροελεγκτή, επιτρέποντας στο χρήστη να διακόψει εντελώς την τροφοδοσία των αισθητήρων αν χρειαστεί. Οι ακροδέκτες \texttt{A} των αισθητήρων ρυθμίζονται αυθαίρετα ώστε να επιλέγεται η διεύθυνση \ac{I2C} της κάθε συσκευής. Χρησιμοποιήσαμε την ίδια διεύθυνση, καθώς οι δύο δίαυλοι \ac{I2C} είναι πλήρως ανεξάρτητοι. Πυκνωτές αποσύζευξης, κρύσταλλοι και άλλα παθητικά εξαρτήματα δεν φαίνονται, καθώς περιλαμβάνονται ήδη στην έτοιμη αναπτυξιακή πλακέτα.}
	\label{fig:schematic}
\end{figure*}

\paragraph{Συνδέσεις}
Η πλακέτα ανάπτυξης και οι αισθητήρες τοποθετήθηκαν και συνδέθηκαν χρησιμοποιώντας ένα breadboard. Τα ολοκληρωμένα κυκλώματα κολλήθηκαν επάνω σε απλές πλακέτες μικρού μεγέθους, που κατασκευάστηκαν με βάση το σχέδιο του Jaroslav Sýkora.\footurl{https://www.jsykora.info/2019/06/pcb-panel-of-smt-breakout-boards-soic-tssop-msop/}

\section{Λογισμικό}

\subsection{Flight Segment}

Όλες οι λειτουργίες του \ac{FDIR} αναπτύχθηκαν χρησιμοποιώντας τη γλώσσα \textbf{C++}\footnote{Επιλέχθηκε το μοντέρνο πρότυπο \texttt{C++17}. Ολόκληρη η εργασία βασίζεται σε ελεύθερο και ανοικτό λογισμικό το οποίο διατίθεται ελεύθερα για λήψη και τροποποίηση. Όλος ο κώδικας αναπτύχθηκε σε \href{https://git-scm.com/}{Git}.}
	
	Η λειτουργικότητα του \ac{FDIR} είναι δομημένη γύρω από την υλοποίηση του \textbf{ECSS-E-ST-70-41C \ac{PUS} που γράφτηκε από την ομάδα AcubeSAT}\footnote{\url{https://gitlab.com/acubesat/obc/ecss-services}}, η οποία προσφέρει μια παραμετροποιήσιμη υλοποίηση του προτύπου χρησιμοποιώντας σύγχρονη C++.
	
	Το λογισμικό του μικροελεγκτή και η βασική λογική βασίζονται στο \textbf{\foothref{https://www.freertos.org/}{Free\acs{RTOS}}}, ένα λειτουργικό σύστημα πραγματικού χρόνου με χαμηλές απαιτήσεις που απευθύνεται σε ενσωματωμένες συσκευές. Το FreeRTOS παρέχει ανεξάρτητες διεργασίες και δομές που επιτρέπουν τον ασφαλή συγχρονισμού δεδομένων μεταξύ παράλληλων παραγωγών \& καταναλωτών.
\begin{figure*}[h]
	\includegraphics{SoftwareFlow}
	\caption{Η ροή δεδομένων μεταξύ των διαφορετικών κομματιών του λογισμικού}
	\label{sec:softwareflow}
\end{figure*}

Για να διασφαλιστεί υψηλή αξιοπιστία και χαμηλή κατανάλωση πόρων, οι ακόλουθοι \textbf{περιορισμοί} λαμβάνονται υπ' όψιν την ανάπτυξη σε C++:
\begin{compactenum}
	\item Η δυναμική κατανομή μνήμης\footnote{Χρήση των \mintinline{cpp}{malloc}, \mintinline{cpp}{new} κλπ.} απαγορεύεται εντελώς
	\label{itm:malloc}
	\item \Cref{itm:malloc} σημαίνει ότι οι κλασικές δομές δεδομένων της C++\footnote{\mintinline{cpp}{std::vector}, \mintinline{cpp}{std::string}, \mintinline{cpp}{std::map} κλπ.} δεν μπορούν να χρησιμοποιηθούν. Αντίθετα, η βιβλιοθήκη \foothref{https://www.etlcpp.com/}{\acf{ETL}} περιλαμβάνει δομές που αποθηκεύονται σε στατική μνήμη, ή στην στοίβα.
	\item "Ακριβά" χαρακτηριστικά, όπως το \emph{Run-Time Type Inference}, οι δυναμικές μετατροπές τύπων (dynamic casts) ή οι εξαιρέσεις (exceptions) απαγορεύονται επίσης.
\end{compactenum}

Η βιβλιοθήκη \ac{HAL} και η σουίτα λογισμικού \foothref{https://www.microchip.com/en-us/development-tools-tools-and-software/embedded-software-center/mplab-harmony-v3}{MPLAB Harmony}  χρησιμοποιούνται για την επικοινωνία με όλα τα ενσωματωμένα περιφερειακά του μικροελεγκτή. Το \foothref{https://www.jetbrains.com/clion/}{CLion} έχει επιλεγεί ως το \acs{IDE}, μαζί με το σύστημα "χτισίματος" κώδικα \foothref{https://cmake.org/}{CMake}.

Όλο το λογισμικό που αναπτύχθηκε στο πλαίσιο της παρούσας διατριβής είναι διαθέσιμο στο διαδίκτυο και έχει καταγραφεί στο \Cref{tab:new_software}. Τα πιο κρίσιμα μέρη του λογισμικού που αναπτύχθηκε έχουν αναπαραχθεί στο \Cref{sec:source_code}. Μια λίστα των έτοιμων ή τροποποιημένων βιβλιοθηκών που χρησιμοποιήθηκαν μπορεί επίσης να βρεθεί στο \Cref{tab:old_software}.


\begin{table*}[h]
	\centering
	\caption[][5pt]{Λίστα του νέου λογισμικού που αναπτύχθηκε για την παρούσα εργασία}
	\label{tab:new_software}
	\begin{tabularx}{\textwidth}{@{}lXp{6cm}@{}}
		\toprule
		Όνομα & Περιγραφή & URL \\ \midrule
		\textbf{\texttt{fdir-demo}} & Πλήρης κώδικας για τον μικροελεγκτή  & \small \url{https://github.com/kongr45gpen/fdir-demo} \\
		\textbf{\texttt{fdir-demo-yamcs}} & Λογισμικό Σταθμού Βάσης: \begin{enumerate}
			\item Διεπαφή με το \acs{YAMCS}
			\item Περιγραφή \acs{ECSS} πακέτων, αναγνώσιμη από μηχανή
			\item Διεπαφή \acs{UART}--\acs{USB} με τον μικροελεγκτή
			\item Πρόγραμμα εμφάνισης της βάσης δεδομένων \acs{PUS}\vspace*{-2ex}
			\end{enumerate} & \small \url{https://github.com/kongr45gpen/fdir-demo-yamcs} \\
		\bottomrule
	\end{tabularx}
\end{table*}

\begin{table*}[h]
	\centering
	\vspace{2em}
	\caption[][5pt]{Λίστα των έτοιμων βιβλιοθηκών που χρησιμοποιήθηκαν}
	\label{tab:old_software}
	\begin{tabularx}{\textwidth}{@{}lp{6cm}X@{}}
		\toprule
		Όνομα & Περιγραφή & Μεταβολές \\ \midrule
		\href{https://www.freertos.org/}{FreeRTOS} & Λειτουργικό σύστημα πραγματικού χρόνου & \\
		\href{https://gitlab.com/acubesat/obc/ecss-services}{\texttt{ecss-services}} & C++ υλοποίηση του προτύπου ECSS-E-ST-70-41C %\autocite{ECSS-E-ST-70-41C} 
		& \small
		Προστέθηκαν υλοποιήσεις υπηρεσιών που δεν υπήρχαν, και βελτιώθηκαν συναρτήσεις διεπαφής με τον μικροελεγκτή\newline\small\url{https://gitlab.com/kongr45gpen/ecss-services/-/tree/fdir}
		 \\
		 \href{https://www.etlcpp.com/}{\acs{ETL}}  & Βιβλιοθήκη C++ (περιλαμβάνει δομές δεδομένων, αλγορίθμους και άλλα εξαρτήματα) για κρίσιμες εφαρμογές με περιορισμένη μνήμη &
		 \\
 		\href{https://github.com/yamcs/yamcs}{\acs{YAMCS}}  & Σουίτα λογισμικού για έλεγχο διαστημικών αποστολών& %\autocite{cheshire_consistent_overhead_1997}
 		\\
		\href{https://github.com/cmcqueen/cobs-c}{\texttt{cobs-c}}  & Υλοποίηση του πρωτοκόλλου \ac{COBS} %\autocite{cheshire_consistent_overhead_1997}
		 & \\
		\bottomrule
	\end{tabularx}
\end{table*}

%\subsection{Space Segment}

%\subsection{Ground Segment}

\subsection{\ac{I2C} Failure Detection}
\label{sec:howcani2cfail}

It is of interest to investigate how the hardware \ac{I2C} peripheral provided by the microcontroller can be used to monitor the symptoms of bus failure.

Έχει ενδιαφέρον να μελετήσουμε πώς το περιφερειακό \ac{I2C} του μικροελεγκτή μπορεί να χρησιμοποιηθεί για τον εντοπισμό διαφόρων ειδών σφαλμάτων στο \ac{I2C}:

\begin{enumerate}
	\item \textbf{Σφάλματα περιφερειακού}
	
	\marginnote{Για να εξασφαλιστεί ο εντοπισμός των σφαλμάτων του περιφερειακού, είναι σημαντικό να βεβαιωθούμε ότι η κατάσταση σφάλματος του περιφερειακού αναγιγνώσκεται μετά από κάθε επικοινωνία. Τα interrupts του μικροελεγκτή και η εντολή \href{https://en.cppreference.com/w/cpp/language/attributes/nodiscard}{\mintinline{cpp}{[[nodiscard]]}} της C++ συνδυάζονται για να διασφαλιστεί ότι όλα τα σφάλματα του υλικού λαμβάνονται υπ' όψιν.}
	Το περιφερειακό \ac{I2C} του μικροελεγκτή είναι ικανό να παράγει σφάλμα κάθε φορά που \emph{το συνδεδεμένο περιφερειακό δεν θέτει το bit "acknowledge"}. Η αποτυχία να θέσει αυτό το bit μπορεί να είναι αποτέλεσμα αποσύνδεσης των γραμμών ρολογιού (\acs{SCL}) ή δεδομένων (\acs{SDA}), βλάβης του διαύλου ή κακής λειτουργίας του ίδιου του περιφερειακού.
	
	\item \textbf{Χρονικό περιθώριο απάντησης}
	
	Σε ορισμένες δυσμενείς για το \ac{I2C} ηλεκτρικές συνθήκες, που μπορεί να προκληθούν από λανθασμένα επιλεγμένες τιμές αντίστασης pull-up ή μεγάλο χωρητικό φορτίο, η ακεραιότητα του σήματος \ac{I2C} μπορεί να χαθεί (\Cref{subfig:i2c_clean}). Αυτό το σφάλμα δεν ανιχνεύεται άμεσα από το περιφερειακό του μικροελεγκτή, αλλά μπορεί να διαγνωστεί με την προσθήκη ενός χρονικού ορίου (timeout) στις αναγνώσεις δεδομένων του αισθητήρα.
	
	\item \textbf{Chip ID}
	
	\begin{margintable}
		\centering
		\caption{Μη εγγράψιμοι καταχωρητές του MCP9808}
		\label{tab:mcp9808readonly}
		\begin{tabularx}{\linewidth}{@{}lXl@{}}
			\toprule
			Διεύθυνση & Καταχωρητής & Τιμή \\ \midrule
			\texttt{0x06} & Manufacturer ID & \texttt{0x0054} \\
			\texttt{0x07} & Device ID & \texttt{0x0400} \\ \bottomrule
		\end{tabularx}
	\end{margintable}

	Είναι πιθανό ο αισθητήρας να υποστεί σοβαρή βλάβη, αλλά να είναι ακόμα σε θέση να ανταποκριθεί στις εντολές \ac{I2C} ή να θέσει το bit \emph{acknowledge}. Για τον λόγο αυτό, πριν από κάθε ανάγνωση της θερμοκρασίας, πραγματοποιείται ένας πιο αυστηρός έλεγχος της κατάστασης του αισθητήρα: οι \emph{μόνιμοι} καταχωρητές του περιφερειακού περιέχουν τιμές οι οποίες, υπό κανονικές συνθήκες, δεν μπορούν να αλλάξουν εκτός αν υπάρξει βλάβη υλικού. Εάν επιστραφεί οποιαδήποτε τιμή διαφορετική από την αναμενόμενη, θεωρείται ότι το περιφερειακό ή ο δίαυλος έχει εμφανίσει σφάλμα.
\end{enumerate}

\begin{figure}[h]
	\includegraphics[trim={0 10cm 0 1.8cm},clip]{scope_1}
	\label{subfig:i2c_clean}
\end{figure}

\begin{figure}[h]
	\includegraphics[trim={0 10cm 0 1.8cm},clip]{scope_5}
	\caption{blablabla}
	\label{subfig:i2c_dirty}
\end{figure}

\FloatBarrier

\subsection{Έλεγχος Αποστολής}

Ο υπολογιστής του επίγειου τμήματος πρέπει να αναλύει τα λαμβανόμενα πακέτα και να στέλνει εντολές, καθώς και να εμφανίζει πληροφορίες σχετικά με τις μετρήσεις των αισθητήρων, την κατάσταση του \ac{FDIR}, και την υγεία του συνδεδεμένου συστήματος πτήσης.

Η σουίτα λογισμικού \acs{YAMCS} \autocite{sela_yamcs_lightweight_2012} επιλέχθηκε για να καλύψει τις παραπάνω ανάγκες, και προσαρμόστηκε ώστε να παρέχει τις δυνατότητες που απαιτούνται για την παρούσα επίδειξη.

Το πρωτόκολλο \ac{ECSS} \autocite{ECSS-E-ST-70-41C} δεν υποστηρίζεται εγγενώς από το \acs{YAMCS}. Ωστόσο, οι απαραίτητες εντολές έχουν τοποθετηθεί στο σύστημα μέσω αρχείων μορφής \ac{XTCE}.\autocite{simon_xtce_standard_2004} Ο πηγαίος κώδικας της ενσωμάτωσης μπορεί να βρεθεί στο \Cref{app:xtce}.

\begin{figure}[h]
	\includegraphics{screenshots/yamcs_replay}
	\caption{Προβολές παραμέτρων και αρχείου στο \acs{YAMCS}}
\end{figure}

\subsection{Βάση δεδομένων \acs{PUS}}

Σε


\section{Στήσιμο \ac{FDIR}}

Ο σκοπός της πειραματικής διάταξης είναι να παρατηρηθεί η απόκριση του συστήματος σε τυχόν αποτυχία των δύο "ευπρόσβλητων" αισθητήρων θερμοκρασίας. Για το σκοπό αυτό, θα προσπαθήσουμε να προσομοιώσουμε κάθε τρόπο αποτυχίας κάθε αισθητήρα, και να σχεδιάσουμε μια υλοποίηση \ac{FDIR} που να προβλέπει όλες αυτές τις αστοχίες.

\marginnote{Οι διπλές αποτυχίες δεν διερευνώνται στο πεδίο εφαρμογής του παρόντος εγγράφου, καθώς εξετάζονται κυρίως μόνο για συστήματα εκτόξευσης και επανδρωμένες αποστολές \parencite{SAVOIR-HB-003}.}
Το πρώτο βήμα για το λεπτομερή σχεδιασμό του \ac{FDIR} είναι η προετοιμασία της \textbf{ανάλυσης FMEA} για το σύστημα. Όλες οι \ac{FMEA} που εκτελούνται ακολουθούν τις απαιτήσεις του προτύπου ECSS-Q-ST-30-02C.\autocite{ECSS-Q-ST-30-02C} Η ανάλυση βασίζεται στην \ac{FMEA} που πραγματοποιήθηκε για τον νανοδορυφόρο AcubeSAT,\autocite{retselis_acubesat_fmea_2020} και παρατίθεται στο \Cref{tab:fmea} για την πειραματική διάταξη. Διερευνώνται όλες οι αναμενόμενες αποτυχίες για τους δύο αισθητήρες, καθώς και μία αποτυχία για ολόκληρο το σύστημα που μπορεί να ανιχνευθεί από τους αισθητήρες που λειτουργούν σωστά. Κάθε ένας από αυτούς τους τρόπους αποτυχίας θα επαληθευτεί αργότερα με την εισαγωγή τροποποιήσεων λογισμικού ή υλικού.

\begin{table*}[h]
	\centering
	\caption[][10pt]{\acs{FMEA} στο σύστημα επίδειξης}
	\label{tab:fmea}
	\begin{adjustbox}{width=1.05\textwidth,center}
	\begin{tabular}{@{}lL{4cm}L{2cm}L{1cm}L{4cm}L{2cm}L{4cm}L{1.5cm}L{3cm}@{}}
		\toprule
		\multicolumn{1}{l}{ID}                            & Τρόπος Αποτυχίας                     & Αίτιο Αποτυχίας     & Φάση αποστολής     & Συνέπειες αποτυχίας: Τοπικές                                    & Συνέπειες αποτυχίας: Τελικές & Εντοπισμός Αποτυχίας/Παρατηρήσιμα Συμπτώματα                                               & Επίπεδο σο\-βα\-ρό\-τη\-τας & Προβλέψεις αντιστάθμισης             \\ \midrule
		\multicolumn{9}{l}{Αισθητήρας θερμοκρασίας MCP9808 \#1}                                                                                                                                                                                                                                                                                                                                                               \\ \midrule
		\textbf{\texttt{F-010}}                                      & Προσωρινή απώλεια λειτουργικότητας       & Τυχαίο, Ακτινοβολία & Όλες & Δεν λαμβάνονται μετρήσεις από τον αισθητήρα               & Καμία                         & Καμία επικοινωνία μέσω \acs{I2C}                                                            & 4              & Πλεονασμός με 2 συνολικά αισθητήρες   \\
		\textbf{\texttt{F-020}}                                      & Μόνιμη απώλεια λειτουργικότητας       & Τυχαίο, Ακτινοβολία & Όλες & Δεν λαμβάνονται μετρήσεις από τον αισθητήρα               & Καμία                         & Καμία επικοινωνία μέσω \acs{I2C}                                                            & 4              & Πλεονασμός με 2 συνολικά αισθητήρες   \\
		\textbf{\texttt{F-030}}                                      & Βραχυκύκλωμα ακροδεκτών ισχύος & Τυχαίο, Ακτινοβολία & Όλες & Δεν λαμβάνονται μετρήσεις από τον αισθητήρα               & Καμία                         & Καμία επικοινωνία μέσω \acs{I2C}                                                            & 4              & Αντίσταση περιορισμού ρεύματος           \\
		\textbf{\texttt{F-040}}                                      & Προσωρινή αλλαγή τιμής            & Τυχαίο, Ακτινοβολία & Όλες & Λανθασμένες θερμοκρασιακές μετρήσεις & Καμία                         & Μεγάλη διαφορά θερμοκρασίας μεταξύ 2 αισθητήρων  & 4              & Πλεονασμός με 2 συνολικά αισθητήρες   \\
		\textbf{\texttt{F-050}}                                      & Μόνιμη αλλαγή τιμής            & Τυχαίο, Ακτινοβολία & Όλες & Λανθασμνες θερμοκρασιακς μετρσεις & Καμία                         & Μεγάλη διαφορά θερμοκρασίας μεταξύ 2 αισθητήρων  & 4              & Πλεονασμός με 2 συνολικά αισθητήρες   \\
		\textbf{\texttt{F-060}}                                      & Κολλημένος ακροδέκτης εξόδου \acs{I2C}         & Τυχαίο, Ακτινοβολία & Όλες & Αδυναμία επικοινωνίας και με τους 2 αισθητήρες & Καμία                         & Καμία επικοινωνία μέσω \acs{I2C} για όλους τους αισθητήρες & 4              & Αισθητήρες συνδεδεμένοι σε διαφορετικούς διαύλους \acs{I2C} \\
		\midrule
		\multicolumn{9}{l}{Αισθητήρας θερμοκρασίας MCP9808 \#2}                        \\ \midrule
			\textbf{\texttt{F-070}}                                      & Προσωρινή απώλεια λειτουργικότητας       & Τυχαίο, Ακτινοβολία & Όλες & Δεν λαμβάνονται μετρήσεις από τον αισθητήρα               & Καμία                         & Καμία επικοινωνία μέσω \acs{I2C}                                                            & 4              & Πλεονασμός με 2 συνολικά αισθητήρες   \\
	\textbf{\texttt{F-080}}                                      & Μόνιμη απώλεια λειτουργικότητας       & Τυχαίο, Ακτινοβολία & Όλες & Δεν λαμβάνονται μετρήσεις από τον αισθητήρα               & Καμία                         & Καμία επικοινωνία μέσω \acs{I2C}                                                            & 4              & Πλεονασμός με 2 συνολικά αισθητήρες   \\
	\textbf{\texttt{F-090}}                                      & Βραχυκύκλωμα ακροδεκτών ισχύος & Τυχαίο, Ακτινοβολία & Όλες & Δεν λαμβάνονται μετρήσεις από τον αισθητήρα               & Καμία                         & Καμία επικοινωνία μέσω \acs{I2C}                                                            & 4              & Αντίσταση περιορισμού ρεύματος           \\
	\textbf{\texttt{F-100}}                                      & Προσωρινή αλλαγή τιμής            & Τυχαίο, Ακτινοβολία & Όλες & Λανθασμένες θερμοκρασιακές μετρήσεις & Καμία                         & Μεγάλη διαφορά θερμοκρασίας μεταξύ 2 αισθητήρων  & 4              & Πλεονασμός με 2 συνολικά αισθητήρες   \\
	\textbf{\texttt{F-110}}                                      & Μόνιμη αλλαγή τιμής            & Τυχαίο, Ακτινοβολία & Όλες & Λανθασμνες θερμοκρασιακς μετρσεις & Καμία                         & Μεγάλη διαφορά θερμοκρασίας μεταξύ 2 αισθητήρων  & 4              & Πλεονασμός με 2 συνολικά αισθητήρες   \\
	\textbf{\texttt{F-120}}                                      & Κολλημένος ακροδέκτης εξόδου \acs{I2C}         & Τυχαίο, Ακτινοβολία & Όλες & Αδυναμία επικοινωνίας και με τους 2 αισθητήρες & Καμία                         & Καμία επικοινωνία μέσω \acs{I2C} για όλους τους αισθητήρες & 4              & Αισθητήρες συνδεδεμένοι σε διαφορετικούς διαύλους \acs{I2C} \\ \midrule
		\multicolumn{9}{l}{Υποσύστημα}                        \\ \midrule
		\textbf{\texttt{F-130}}                                      & Υπερθέρμανση       & Βραχυκύκλωμα, περιβάλλον & Όλες & Αποτυχία ευάλωτων εξαρτημάτων & Απώλεια λειτουργικότητας υποσυστήματος & Μετρημένη θερμοκρασία εκτός του αναμενόμενου εύρους  & 3              & Θερμική ανάλυση με περιθώριο ασφαλείας, προστασία υπερέντασης  \\
		\bottomrule
	\end{tabular}
	\end{adjustbox}
\end{table*}

\subsection{Λεπτομερής σχεδιασμός \ac{FDIR}}

\begin{figure*}[ht]
	\includegraphics{TempSensorFDIR}
	\caption[Επισκόπηση της διαδικασίας FDIR του αισθητήρα θερμοκρασίας]{Σύνοψη της διαδικασίας \ac{FDIR} του αισθητήρα θερμοκρασίας. Για κάθε διεργασία που εκτελείται και για κάθε σφάλμα που εντοπίζεται, παράγεται και η αντίστοιχη τηλεμετρία.}
	\label{fig:fdirtemp}
\end{figure*}

Το \ac{FDIR} των αισθητήρων ακουλουθεί την ιεραρχική διαδικασία που περιγράφεται στο \Cref{sec:fdir_operating_modes}, που εμφανίζεται στο \Cref{fig:fdirtemp} όπως έχει προσαρμοστεί για τους αισθητήρες.

Η προσέγγιση ακολουθά τα παρακάτω βήματα, τα οποία εκτελούνται διαρκώς στο υπόβαθρο:
\marginnote{Για αυτήν την επίδειξη, δεν θα ερευνήσουμε αποτυχίες των εσωτερικών στοιχείων του μικροελεγκτή. Δείτε στο \parencite{retselis_acubesat_fmea_2020} για το πλήρες \acs{FMEA} και \acs{HSIA} σοτυς μικροελεγκτές.}


\begin{compactenum}
	\item Παρακολουθείται η κατάσταση υγείας του διαύλου \ac{I2C} (\Cref{sec:howcani2cfail}). Οποιαδήποτε αποτυχία ή έλλειψη επικοινωνίας υποδεικνύει βλάβη στα ηλεκτρονικά του αισθητήρα.
	\item Παρακολουθείται η έξοδος θερμοκρασίας των αισθητήρων. Τυχόν τιμές που βρίσκονται εκτός των ορίων των φυσικώς δυνατών θερμικών συνθηκών θεωρούνται ότι υποδηλώνουν βλάβες του αισθητήρα ή της επικοινωνίας. Τυχόν τιμές εκτός των ορίων λειτουργίας των ηλεκτρονικών του υποσυστήματος θεωρούνται ότι υποδηλώνουν υπερθέρμανση και οδηγούν σε επανεκκίνηση του υποσυστήματος.
	\item Για να διορθωθούν οι αποτυχίες, επιχειρείται πρώτα επανεκκίνηση (power-cycle) του αισθητήρα. Εάν οι τιμές εξακολουθούν να είναι εσφαλμένες, τότε θεωρείται πως ο αισθητήρας δεν μπορεί να ανακάμψει από την βλάβη, και απλώς απομονώνεται και απενεργοποιείται.
\end{compactenum}

%\clearpage
\paragraph{\acl{HSIA}}

Αφού έχουμε καθορίσει τους πιθανούς τρόπους αποτυχίας και τη λογική λειτουργίας του συστήματος, είμαστε έτοιμοι να αναλύσουμε κάθε πιθανή αποτυχία για να ορίσουμε τις αναμενόμενες εισόδους λογισμικού για το \ac{FDIR}. Πιο συγκεκριμένα, για κάθε αποτυχία πρέπει να οριστούν τα εξής: \autocite[84]{SAVOIR-HB-003}
\begin{compactitem}
	\item \textbf{Παράμετροι προς παρακολούθηση} για εντοπισμό
	\item \textbf{Εύρη τιμών} για να διαχωρίσουν τις καταστάσεις ύπαρξης ή μη κάποιας αποτυχίας
	\item Ενέργειες απομόνωσης και ανάκαμψης για την αποτροπή της διάδοσης της αποτυχίας και, εάν είναι δυνατόν, για την επαναφορά του συστήματος σε κανονική λειτουργία.
\end{compactitem}

Οι παραπάνω πληροφορίες παρατίθενται στον λεγόμενο πίνακα \acf{HSIA}, ο οποίος συνδέει κάθε αποτυχία (που προσδιορίζεται στο \acl{FMEA}) με τις αντίστοιχες παραμέτρους λογισμικού χαμηλού επιπέδου (\Cref{tab:hsia}).

Για τους σκοπούς αυτής της επίδειξης, θα θεωρήσουμε ότι όλα τα στοιχεία \ac{FMEA} μπορούν να οδηγήσουν σε \emph{πιθανά γεγονότα} (feared events), δηλαδή ότι το \ac{FDIR} θα καλύπτει όλες τις αναγνωρισμένες πιθανές αποτυχίες.

Πιο συγκεκριμένα, το \ac{HSIA} προσθέτει τις ακόλουθες σημαντικές πληροφορίες στο \ac{FMEA}:\autocite{ECSS-Q-ST-30-02C}
\begin{itemize}
	\item \textbf{Παρατηρούμενες παράμετροι} και \textbf{συνθήκες} που πυροδοτούν την ενέργεια ανάκτησης.
	
	Αυτές παρατίθενται εδώ σε όρους παραμέτρων \ac{PUS} που μπορούν εύκολα να διαβαστούν και να συγκριθούν από το λογισμικό. Αυτός ο κατάλογος συνδέεται στη συνέχεια με τους αντίστοιχους ορισμούς της υπηρεσίας \emph{\texttt{ST[12]} on-board monitoring}, που παρατίθενται στον \Cref{tab:demo_monitoring}.
	
	Είναι σημαντικό να σημειωθεί ότι καμία μεμονωμένη εκτός ορίων τιμή δεν θα πρέπει να προκαλέσει ενέργεια ανάκτησης. Αυτό γίνεται ώστε πρόσκαιρα σφάλματα ή προσωρινά προβλήματα επικοινωνίας να μην μπορούν να οδηγήσουν σε κάποια άσκοπη ενεργοποίηση του \ac{FDIR}, που θα μπορούσε να απενεργοποιήσει ένα καλά λειτουργικό εξάρτημα.
	
	\marginnote{\textbf{Προσωρινή αποτυχία}: Προκαλείται από γεγονότα όπως bit flips, θόρυβο ή μεταβατικά φαινόμενα και μπορεί να διορθωθεί χωρίς παρέμβαση ή με μια απλή επανεκκίνηση/κύκλο τροφοδοσίας.\par\textbf{Διαρκής αποτυχία}: Μια αποτυχία (συνήθως στο υλικό, π.χ. λόγω \acsp{SEL} ή βραχυκυκλωμάτων) που δεν μπορεί να διορθωθεί αυτόνομα.}
	Η διάκριση μεταξύ \emph{προσωρινών} και \emph{μόνιμων} αποτυχιών γίνεται με \textbf{μετρώντας τον αριθμό των διαδοχικών αποτυχιών}. Προτού απενεργοποιηθεί μόνιμα ένας αισθητήρας, πρέπει ενδεικτικά να έχουν αποτύχει τουλάχιστον 5 προσπάθειες επικοινωνίας.
	
	Η χρήση 2 αισθητήρων που λειτουργούν σε ενεργό πλεονασμό επιτρέπει επίσης τη διερεύνηση της διαφοράς μεταξύ των δύο θερμοκρασιών για την εξαγωγή συμπερασμάτων σχετικά με την υγεία των παραγόμενων δεδομένων. Εάν η απόλυτη διαφορά μεταξύ των 2 τιμών είναι πολύ υψηλή, υποθέτοντας ότι οι αισθητήρες βρίσκονται αρκετά κοντά μεταξύ τους, θεωρείται ότι υπάρχει κατάσταση σφάλματος. Ωστόσο, καθώς ο αριθμός των αισθητήρων είναι ζυγός, δεν είναι δυνατόν να συμπεράνουμε ποιος αισθητήρας έχει αποτύχει.
	
	\item \textbf{Δράσεις αποκατάστασης και απομόνωσης βλάβης}.
	
	Αυτές απαριθμούνται σε όρους γεγονότων \ac{PUS} (\emph{\texttt{ST[05]} event reporting}) και ενεργειών (\emph{\texttt{ST[19]} eventaction}), καταγεγραμμένες στον \Cref{tab:demo_eventaction}.
	
	Οι επιλεγμένες ενέργειες αποκατάστασης αντιστοιχούν στην προσέγγιση του \Cref{fig:fdirtemp}. Επιπλέον, όταν δεν είναι γνωστό ποιος αισθητήρας έχει αποτύχει, χρησιμοποιείται μια ασφαλής προσέγγιση επανεκκίνησης ή απενεργοποίησης και των δύο αισθητήρων.
\end{itemize}

\begin{table*}
	\centering
	\caption{Πίνακας HSIA}
	\label{tab:hsia}
	\begin{tabular}{@{}lL{4cm}L{4cm}L{1cm}L{1cm}L{3.5cm}@{}}
		\toprule
		ID & Τρόπος Αποτυχίας & Παρατηρούμενες Παράμετροι & ST[12] ID & ST[05] ID & Ενέργεια αποκατάστασης \\ \midrule
		\multicolumn{6}{l}{Αισθητήρας θερμοκρασίας MCP9808 \#1} \\ \midrule
		
		
		
		\textbf{\texttt{F-010}} & Προσωρινή απώλεια λειτουργικότητας & \(\texttt{T1\_Status} = \texttt{TIMEOUT}\) \newline 2 φορές & 0 & 0 & Επανεκκίνηση αισθητήρα 1 \\
		\textbf{\texttt{F-020}} & Μόνιμη απώλεια λειτουργικότητας & \(\texttt{T1\_Status} = \texttt{TIMEOUT}\) \newline 5 φορές & 2 & 2 & Αγνόηση αισθητήρα 1 \\
		\textbf{\texttt{F-030}} & Βραχυκύκλωμα ακροδεκτών ισχύος & \(\texttt{T1\_Status} = \texttt{TIMEOUT}\) \newline 5 φορές & 2 & 2 & Αγνόηση αισθητήρα 1 \\[5ex]
		\textbf{\texttt{F-040}} & Προσωρινή αλλαγή τιμής & 
		\(
		\begin{cases}
			\left|\Delta T\right| & > \SI{20}{\celsius} \text{ ή} \\
			T_1 &> \SI{100}{\celsius} \text{ ή} \\
			T_1 &< \SI{-40}{\celsius}
		\end{cases}
		\) \newline 2 φορές
		 & 4, 6 & 0, 4 & Επανεκκίνηση αισθητήρα 1 \\
		\textbf{\texttt{F-050}} & Μόνιμη αλλαγή τιμής & \(
		\begin{cases}
		\left|\Delta T\right| & > \SI{20}{\celsius} \text{ ή} \\
		T_1 &> \SI{100}{\celsius} \text{ ή} \\
		T_1 &< \SI{-40}{\celsius}
		\end{cases}
		\) \newline 5 φορές & 7, 9 & 2, 5 & Αγνόηση αισθητήρα 1 \\[9ex]
		\textbf{\texttt{F-060}} & Κολλημένος ακροδέκτης εξόδου \acs{I2C} & \(\texttt{T1\_Status} = \texttt{TIMEOUT}\) \newline 5 φορές & 2 & 2 & Αγνόηση αισθητήρα 1 \\ \midrule
		
		
		
		\multicolumn{6}{l}{Αισθητήρας θερμοκρασίας MCP9808 \#2} \\ \midrule
		
		
		
		\textbf{\texttt{F-070}} & Προσωρινή απώλεια λειτουργικότητας & \(\texttt{T2\_Status} = \texttt{TIMEOUT}\) \newline 2 φορές & 1 & 1 & Επανεκκίνησ αισθητήρα 2 \\
		\textbf{\texttt{F-080}} & Μόνιμη απώλεια λειτουργικότητας & \(\texttt{T2\_Status} = \texttt{TIMEOUT}\) \newline 5 φορές & 3 & 3 & Αγνόηση αισθητήρα 2 \\
		\textbf{\texttt{F-090}} & Βραχυκύκλωμα ακροδεκτών ισχύος & \(\texttt{T2\_Status} = \texttt{TIMEOUT}\) \newline 5 φορές & 3 & 3 & Αγνόηση αισθητήρα 2 \\[5ex]
		\textbf{\texttt{F-100}} & Προσωρινή αλλαγή τιμής & 
		\(
		\begin{cases}
		\left|\Delta T\right| & > \SI{20}{\celsius} \text{ ή} \\
		T_2 &> \SI{100}{\celsius} \text{ ή} \\
		T_2 &< \SI{-40}{\celsius}
		\end{cases}
		\) \newline 2 φορές
		& 5, 6 & 1, 4 & Επανεκκίνηση αισθητήρα 2 \\
		\textbf{\texttt{F-110}} & Μόνιμη αλλαγή τιμής & \(
		\begin{cases}
		\left|\Delta T\right| & > \SI{20}{\celsius} \text{ ή} \\
		T_2 &> \SI{100}{\celsius} \text{ ή} \\
		T_2 &< \SI{-40}{\celsius}
		\end{cases}
		\) \newline 5 φορές & 8, 9 & 3, 5 & Αγνόηση αισθητήρα 2 \\[9ex]
		\textbf{\texttt{F-120}} & Κολλημένος ακροδέκτης εξόδου \acs{I2C} & \(\texttt{T2\_Status} = \texttt{TIMEOUT}\) \newline 5 φορές & 3 & 3 & Αγνόηση αισθητήρα 2 \\ \midrule
		
		
		
		\multicolumn{6}{l}{Υποσύστημα} \\ \midrule
		
		
		
		\textbf{\texttt{F-130}} & Υπερθέρμανση & \(T_1 > \SI{40}{\celsius}\) or \(T_2 > \SI{40}{\celsius}\) & 10, 11 & 6 & Επανεκκίνηση υποσυστήματος \\ \bottomrule
	\end{tabular}
	\vspace{2pt}
\end{table*}

%\clearpage

\paragraph{Παράμετροι}

Μετά την ολοκλήρωση της \acl{HSIA}, είμαστε έτοιμοι να ορίσουμε τις αριθμητικές παραμέτρους της υπηρεσίας \emph{\texttt{ST[20]} on-board parameter management} \autocite{ECSS-E-ST-70-41C} (\Cref{tab:demo_params}).

Πέρα από τις εξόδους των αισθητήρων, έχουμε συμπεριλάβει τη \textbf{διαφορά} (\(\Delta\)) μεταξύ των δύο θερμοκρασιών, καθώς το πρότυπο \acs{PUS} δεν παρέχει τρόπους για την εκτέλεση αριθμητικών υπολογισμών. Επιπλέον, περιλαμβάνεται η κατάσταση λειτουργίας του κάθε αισθητήρα, η οποία είναι μια απαριθμημένη (enumerated) τιμή.\footnote{Η τιμή μπορεί να είναι μία από τις \texttt{NOMINAL} (ο αισθητήρας λειτουργεί κανονικά), \texttt{TIMEOUT} (έχει εντοπιστεί κάποιο σφάλμα) ή \texttt{DISABLED} (ο αισθητήρας είναι ρητά απενεργοποιημένος)} 

Αυτές οι παράμετροι τηλεμετρώνται στον σταθμό βάσης και εμφανίζονται στο χρήστη περιοδικά, μέσω της υπηρεσίας \emph{\texttt{ST[03]} housekeeping} \ac{PUS} και των ραδιοφάρων που αυτή εκπέμπτη. Ωστόσο, όταν το CubeSat βρίσκεται στο διάστημα, ο σταθμός βάσης δεν θα έχει συνεχή πρόσβαση σε αυτά τα δεδομένα, καθώς ο δορυφόρος δεν θα είναι ορατός από τους επίγειους σταθμούς καθ' όλη τη διάρκεια της τροχιάς του.

\begin{table}[h]
	\centering
	\caption[Λίστα παραμέτρων \texttt{ST[20]}]{Λίστα παραμέτρων \texttt{ST[20]}\\R: Μόνο ανάγνωση\\RW: Ανάγνωση και εγγραφή}
	\label{tab:demo_params}
	\begin{tabularx}{\textwidth}{@{}rXlll@{}}
		\toprule
		ID & Παράμετρος              & Μέτρηση & Τύπος & Εγγραφή \\ \midrule
		0            & Θερμοκρασία 1          & \si{\celsius}      & \texttt{float} & R     \\
		1            & Θερμοκρασία 2          & \si{\celsius}      & \texttt{float} & R    \\
		2            & \(\Delta\) Θερμοκρασίας & \si{\celsius}      & \texttt{float} & R    \\
		3            & Κατάσταση Θερμοκρασία 1         &       & Απαρίθμηση   & RW  \\
		4            & Κατάσταση Θερμοκρασία 2         &       & Απαρίθμηση   & RW  \\
		5			 & Κατάσταση Θερμοκρασία 1+2       &		& Απαρίθμηση   & R  \\ \bottomrule
	\end{tabularx}
\end{table}

\paragraph{Ορισμοί παρακολούθησης}

Μετά τον ορισμό των παραμέτρων, θα πρέπει να περιγραφούν οι ορισμοί παρακολούθησης που καθορίζουν τα αποδεκτά και μη εύρη τιμών για κάθε παράμετρο. Η διαχείριση αυτών γίνεται από την υπηρεσία \emph{\texttt{ST[12]} on-board monitoring} του \ac{PUS}.

Οι \emph{συνθήκες εγκυρότητας ελέγχου} είναι σημαντικό να αναφερθούν σε αυτή την περίπτωση, καθώς χρησιμοποιούν τις τρεις παραμέτρους \emph{Κατάστασης} του \Cref{tab:demo_params} για να αποτρέψουν την εκτέλεση ελέγχων σε απενεργοποιημένα περιφερειακά. Ως εκ τούτου, οι αισθητήρες που δεν παρέχουν τιμές λόγω προβλημάτων υλικού, ενεργειών \ac{FDIR} ή κάποιας ρητής τηλεεντολής από το Σταθμό Βάσης, δεν θα μπορούν να ενεργοποιήσουν ενέργειες \ac{FDIR}.

\begin{table*}[h]
	\centering
	\caption[Λίστα ορισμών παρακολούθησης της υπηρεσίας \texttt{ST[12]}][5pt]{Λίστα ορισμών παρακολούθησης της υπηρεσίας \texttt{ST[12]}. Τα σύμβολα \(t\) και \(\Delta\) αναπαριστούν τις εκάστοτε τιμές των παραμέτρων.}
	\label{tab:demo_monitoring}
	\begin{adjustbox}{width=\textwidth}
	\begin{tabular}{@{}L{1cm}L{3.2cm}L{3.6cm}L{1.5cm}L{1.5cm}L{1.2cm}ll@{}}
		\toprule
		&  & \multicolumn{2}{c}{Συνθήκες εγκυρότητας ελέγχου} &  &  & \multicolumn{2}{c}{Έλεγχος} \\ \cmidrule(lr){3-4} \cmidrule(l){7-8} 
		ID & Παρακολουθούμενη παράμετρος & Παράμετρος εγκυρότητας & Αναμενόμενη τιμή & Περίοδος & Αρ. μετρήσεων & Είδος & Κριτήριο \\ \midrule
		0 & Κατάσταση Θερμ. 1 &  &  & \SI{500}{\milli\second} & 2 & Ισότητα & \(\neq\) \texttt{TIMEOUT} \\
		1 & Κατάσταση Θερμ. 2 &  &  & \SI{500}{\milli\second} & 2 & Ισότητα & \(\neq\) \texttt{TIMEOUT} \\
		2 & Κατάσταση Θερμ. 1 &  &  & \SI{500}{\milli\second} & 5 & Ισότητα & \(\neq\) \texttt{TIMEOUT} \\
		3 & Κατάσταση Θερμ. 2 &  &  & \SI{500}{\milli\second} & 5 & Ισότητα & \(\neq\) \texttt{TIMEOUT} \\
		\midrule
		4 & Θερμοκρασία 1 & Κατάσταση Θερμ. 1 & \texttt{NOMINAL} & \SI{500}{\milli\second} & 2 & Εύρος & \( -\SI{40}{\celsius} < t < \SI{100}{\celsius} \) \\
		5 & Θερμοκρασία 2 & Κατάσταση Θερμ. 2 & \texttt{NOMINAL} & \SI{500}{\milli\second} & 2 & Εύρος & \( -\SI{40}{\celsius} < t < \SI{100}{\celsius} \) \\
		6 & \(\Delta\) Θερμοκρασία & Κατάσταση Θερμ. 1+2 & \texttt{NOMINAL} & \SI{500}{\milli\second} & 2 & Εύρος & \( -\SI{20}{\celsius} < \Delta < \SI{20}{\celsius} \) \\
		\midrule
		7 & Θερμοκρασία 1 & Κατάσταση Θερμ. 1 & \texttt{NOMINAL} & \SI{500}{\milli\second} & 5 & Εύρος & \( -\SI{40}{\celsius} < t < \SI{100}{\celsius} \) \\
		8 & Θερμοκρασία 2 & Κατάσταση Θερμ. 2 & \texttt{NOMINAL} & \SI{500}{\milli\second} & 5 & Εύρος & \( -\SI{40}{\celsius} < t < \SI{100}{\celsius} \) \\
		9 & \(\Delta\) Θερμοκρασία & Κατάσταση Θερμ. 1+2 & \texttt{NOMINAL} & \SI{500}{\milli\second} & 5 & Εύρος & \( -\SI{20}{\celsius} < \Delta < \SI{20}{\celsius} \) \\
		\midrule
		10 & Θερμοκρασία 1 & Κατάσταση Θερμ. 1 & \texttt{NOMINAL} & \SI{500}{\milli\second} & 5 & Εύρος & \( t < \SI{50}{\celsius} \) \\
		11 & Θερμοκρασία 2 & Κατάσταση Θερμ. 2 & \texttt{NOMINAL} & \SI{500}{\milli\second} & 5 & Εύρος & \( t < \SI{50}{\celsius} \) \\ \bottomrule
	\end{tabular}
	\end{adjustbox}
\end{table*}

\FloatBarrier

\paragraph{Event-action definitions}

Το τελευταίο κομμάτι του παζλ είναι οι ορισμοί των γεγονότων-αντιδράσεων (event-actions), που μπορούν να φανούν στον \Cref{tab:demo_eventaction} και συνδυάζουν:
\begin{itemize}
	\item \ac{PUS} γεγονότα (υπηρεσία \texttt{ST[05]}), τα οποία εκπέμπονται αυτόματα όταν ένας ορισμός παρακολούθησης ξεπερνά τα όριά του
	\item \ac{PUS} ορισμοί γεγονότων-αντιδράσεων (υπηρεσία \texttt{ST[19]}), οι οποίοι συνδέουν κάθε εμφάνιση ενός γεγονότος με μία αποθηκευμένη τηλεεντολή που εκτελείται αμέσως και αναπαριστά τις διαδικασίες ανάκτησης του \acs{FDIR}.
\end{itemize}

Όλοι αυτοί οι ορισμοί μπορούν εύκολα να τροποποιηθούν από τους χειριστές με τη χρήση μεμονωμένων τηλεεντολών, οι οποίες επιδρούν επάνω στην βάση δεδομένων του διαστημικού εξοπλισμού.

\begin{table}[h]
	\centering
	\caption{Λίστα ορισμών γεγονότων-αντιδράσεων της υπηρεσίας \texttt{ST[19]}}
	\label{tab:demo_eventaction}
	\begin{tabularx}{\textwidth}{@{}L{2cm}L{2cm}X@{}}
		\toprule
		ID γεγονότος & Ορισμός Παρακολούθησης & Αντίδραση \\ \midrule
		0 & 0, 4 & Επανεκκίνηση αισθητήρα 1 \\
		1 & 1, 5 & Επανεκκίνηση αισθητήρα 2 \\
		2 & 2, 7 & Κατάσταση αισθητήρα 1 \( = \) \texttt{DISABLED} \\
		3 & 3, 8 & Κατάσταση αισθητήρα 2 \( = \) \texttt{DISABLED} \\
		4 & 6 & Επανεκκίνηση αισθητήρων 1 + 2 \\
		5 & 9 & Κατάσταση αισθητήρων 1 + 2 \( = \) \texttt{DISABLED} \\
		6 & 10, 11 & Επανεκκίνηση συστήματος \\ \bottomrule
	\end{tabularx}
\end{table}

%\clearpage
\section{Επικύρωση \ac{FDIR}}

\subsection{Κανονική λειτουργία}

Στην κανονική λειτουργία, δεν προσομοιώνεται καμία βλάβη. Το σύστημα είναι ενεργοποιημένο και παράγει τηλεμετρία που υπακούει στα πρότυπα \ac{ECSS} (\Cref{fig:yamcshousekeeping}), η οποία περιλαμβάνει τιμές παραμέτρων που αναλύονται από το \acs{YAMCS} (\Cref{fig:yamcsparameter}). Επιπλέον, διατηρείται ένα αρχείο καταγραφής για διαγνωστικούς σκοπούς (\Cref{fig:lognominal}). Το σύστημα συμμορφώνεται με τις ορισμένες απαιτήσεις (\Cref{sec:tsvcd}) και μπορεί να μεταδώσει τη θερμοκρασία στον Σταθμο Βάσης, όπως είναι αναμενόμενο.

\begin{figure}
	\centering
	\includegraphics{media/screenshots/yamcs_housekeeping}
	\caption{Περιοδικοί ραδιοφάροι που παράγονται από τον μικροελεγκτή, όπως φαίνονται στο \acs{YAMCS}}
	\label{fig:yamcshousekeeping}
\end{figure}

\begin{figure}[h]
	\centering
	\includegraphics{media/screenshots/yamcs_parameter}
	\caption{Εξέλιξη μιας παραμέτρου θερμοκρασίας στο χρόνο, όπως φαίνεται στο \acs{YAMCS}}
	\label{fig:yamcsparameter}
\end{figure}

\begin{figure}
\begin{cminted}{text}
909601  [debug  ] T1 = 28.18
909701  [debug  ] T1 = 28.08
909801  [debug  ] T1 = 28.14
909901  [debug  ] T1 = 27.97
910000  [trace  ] New TM [3,25]
910001  [debug  ] T1 = 28.10
910101  [debug  ] T1 = 28.03
910201  [debug  ] T1 = 28.12
910301  [debug  ] T1 = 27.90
910401  [debug  ] T1 = 28.08
\end{cminted}
\caption[Έξοδος καταγραφής σε κανονική λειτουργία]{Έξοδος καταγραφής σε κανονική λειτουργία. Ο πρώτος αριθμός δηλώνει τους χτύπους ρολογιού του μικροελεγκτή, που μετρώνται σε χιλιοστά του δευτερολέπτου από την εκκίνηση.}
\label{fig:lognominal}
\end{figure}

\subsection{Προσομοίωση αστοχιών}

Για την προσομοίωση κάθε αποτυχίας χρησιμοποιήθηκαν οι ακόλουθες μέθοδοι:
\begin{itemize}
	\item Για τις αποτυχίες επικοινωνίας μεταξύ εξαρτημάτων, κάθε αισθητήρας απλά αποσυνδέθηκε φυσικά από το σύστημα.
	\item Για μικρές αλλαγές στη θερμοκρασία, ένα πιστόλι θερμού αέρα ή άλλη πηγή θερμότητας στρεφόταν προς κάθε αισθητήρα, με κατάλληλη φροντίδα ώστε να μη ξεπεραστούν τα λειτουργικά όρια των εξαρτημάτων.
	\item Για μεταβολές της θερμοκρασίας που δεν ήταν πρακτικά δυνατό να προσομοιωθούν, η βλάβη εισήχθη στο λογισμικό, τροποποιώντας χειροκίνητα τις αντίστοιχες μεταβλητές.
	
	Τα δύο κουμπιά που υπάρχουν στην αναπτυξιακή πλακέτα χρησιμοποιήθηκαν ένα απλό μέσο για την "εισαγωγή" ακραίων τιμών θερμοκρασίας.
\end{itemize}

\subsection{Τροποποίηση του \acs{FDIR} σε πραγματικό χρόνο}

Η δύναμη της προσέγγισης \ac{FDIR} του \acs{SAVOIR} έγκειται στο ότι ολόκληρη η δομή \ac{FDIR} μπορεί να τροποποιηθεί με ασφάλεια μέσω τηλεεντολών, χωρίς να απαιτούνται τροποποιήσεις ή επαναφορτώσεις του κώδικα και του λογισμικού. Η εφαρµογή του μοντέλου υπηρεσιών \acs{ECSS} επιτρέπει την προσαρµογή όλων των υπηρεσιών και λειτουργιών \ac{FDIR}, χρησιµοποιώντας προκαθορισµένες δοµές τηλεεντολών. Σε αυτή την ενότητα, θα εκτελεστούν εντολές \acs{ECSS} για την επίδειξη αυτών των δυνατοτήτων και του ελέγχου τους από τον σταθμό βάσης.

Γενικότερα, το επίπεδο της δυνατότητας αναδιαμόρφωσης που παρέχει το σύστημα καθορίζεται από τις απαιτήσεις που παρατίθενται στα \cite{ECSS-E-ST-70-11C,SAVOIR-HB-003}. Η προσαρμοσμένη έκδοση που χρησιμοποιήθηκε για τα πειράματά μας παρατίθεται στο \Cref{tab:fdir-recon-rq}.

\begin{table*}[h]
	\centering
	\caption{Απαιτήσεις αναδιαμόρφωσης \ac{FDIR} στην πειραματική διάταξη}
	\label{tab:fdir-recon-rq}
	\begin{tabularx}{\textwidth}{@{}lXlL{4cm}@{}}
		\toprule
		\# & Απαίτηση & Υπηρεσία & Λεπτομέρειες \\ \midrule
		\texttt{RC-010} & Οι αναφορές FDIR πρέπει να περιέχουν όλες τις πληροφορίες για την ανάλυση αποτυχιών (π.χ. ώρα εμφάνισης, παράμετροι εκτός ορίων, πραγματοποιημένες μεταγωγές). & ST[12] on-board monitoring & Μέσω περιοδικών \emph{αναφορών μεταγωγής} \\
		\texttt{RC-020} & Πρέπει να παρέχεται η δυνατότητα ενεργοποίησης και απενεργοποίησης οποιασδήποτε λειτουργίας FDIR μέσω τηλεεντολών. & ST[12] on-board monitoring & Με εντολές \emph{enable}/\emph{disable} \emph{parameter monitoring definitions} \\\
		\texttt{RC-030} & Πρέπει να παρέχεται η δυνατότητα προσθήκης και διαγραφής παραμέτρων από τον κατάλογο παρακολούθησης. & ST[12] on-board monitoring & Με εντολές \emph{add}/\emph{delete} \emph{parameter monitoring definitions} \\
		\texttt{RC-040} & Πρέπει να παρέχεται η δυνατότητα τροποποίησης των ενεργειών αποκατάστασης βλάβης που συνδέονται με κάθε ορισμό παρακολούθησης. & ST[19] event-action & Με εντολές \emph{add}, \emph{delete}, \emph{enable} και \emph{disable} \emph{event-action definitions} \\ \bottomrule
	\end{tabularx}
\end{table*}

Η πλατφόρμα \ac{YAMCS} χρησιμοποιήθηκε ξανά για τη δημιουργία των επιθυμητών εντολών (\Cref{fig:yamcs_commands}).

\begin{figure}[h]
	\includegraphics{screenshots/yamcs_commands.png}
	\caption[Λίστα τηλεεντολών στο περιβάλλον του \acs{YAMCS}]{Λίστα τηλεεντολών στο περιβάλλον του \acs{YAMCS}. Αυτές οι εντολές μπορούν να εκκινήσουν διαδικασίες στον δορυφόρο, να ενεργοποιήσουν/απενεργοποιήσουν αισθητήρες, ή να αλλάξουν τις ρυθμίσεις των εξαρτημάτων του δορυφόρου. Η λίστα αυτών των εντολών παρέχεται στο \acs{YAMCS} μέσω των αρχείων \ac{XTCE} (\Cref{app:xtce}).}
	\label{fig:yamcs_commands}
\end{figure}



\chapter{Συμπεράσματα και Μελλοντική Εργασία}
\label{cap:conclusion}

% Suggestions for standard:
% hard to play with parameters
% two validity conditions: safe mode etc. how to manage?
% derived parameters (e.g. Δ between sensors)
% event-action definition ID

\section{Μελλοντική εργασία}

%\backmatter
\appendix

\begin{fullwidth}
\printbibliography[heading=bibnumbered]
\end{fullwidth}


\printindex

\chapter{Source code}
\label{sec:source_code}

\setminted{
	bgcolor={},
	fontsize=\fontsize{9pt}{9pt}
}

%\begin{fullwidth}

\section*{\texttt{main.cpp}}

%\inputminted{cpp}{code/main.cpp}

\newpage
\section*{\texttt{xtce.xml}}
\label{app:xtce}

fixme

%\inputminted{xml}{code/xtce.xml}

%\end{fullwidth}

\end{document}

